var Cookie;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(obj){return"object"==typeof obj&&obj.buffer&&obj.buffer.constructor===ArrayBuffer});var createOutputMethod=function(outputType){return function(message){return new Md5(!0).update(message)[outputType]()}},createMethod=function(){var method=createOutputMethod("hex");NODE_JS&&(method=nodeWrap(method)),method.create=function(){return new Md5},method.update=function(message){return method.create().update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(type)}return method},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(message){if("string"==typeof message)return crypto.createHash("md5").update(message,"utf8").digest("hex");if(null==message)throw ERROR;return message.constructor===ArrayBuffer&&(message=new Uint8Array(message)),Array.isArray(message)||ArrayBuffer.isView(message)||message.constructor===Buffer?crypto.createHash("md5").update(new Buffer(message)).digest("hex"):method(message)};return nodeMethod};function Md5(sharedMemory){if(sharedMemory)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);this.buffer8=new Uint8Array(buffer),this.blocks=new Uint32Array(buffer)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(message){if(!this.finalized){var notString,type=typeof message;if("string"!==type){if("object"!==type)throw ERROR;if(null===message)throw ERROR;if(ARRAY_BUFFER&&message.constructor===ArrayBuffer)message=new Uint8Array(message);else if(!(Array.isArray(message)||ARRAY_BUFFER&&ArrayBuffer.isView(message)))throw ERROR;notString=!0}for(var code,i,index=0,length=message.length,blocks=this.blocks,buffer8=this.buffer8;index<length;){if(this.hashed&&(this.hashed=!1,blocks[0]=blocks[16],blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0),notString)if(ARRAY_BUFFER)for(i=this.start;index<length&&i<64;++index)buffer8[i++]=message[index];else for(i=this.start;index<length&&i<64;++index)blocks[i>>2]|=message[index]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;index<length&&i<64;++index)code=message.charCodeAt(index),buffer8[i++]=code<128?code:(buffer8[i++]=code<2048?192|code>>6:(buffer8[i++]=code<55296||57344<=code?224|code>>12:(code=65536+((1023&code)<<10|1023&message.charCodeAt(++index)),buffer8[i++]=240|code>>18,128|code>>12&63),128|code>>6&63),128|63&code);else for(i=this.start;index<length&&i<64;++index)(code=message.charCodeAt(index))<128?blocks[i>>2]|=code<<SHIFT[3&i++]:(code<2048?blocks[i>>2]|=(192|code>>6)<<SHIFT[3&i++]:(code<55296||57344<=code?blocks[i>>2]|=(224|code>>12)<<SHIFT[3&i++]:(code=65536+((1023&code)<<10|1023&message.charCodeAt(++index)),blocks[i>>2]|=(240|code>>18)<<SHIFT[3&i++],blocks[i>>2]|=(128|code>>12&63)<<SHIFT[3&i++]),blocks[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++]),blocks[i>>2]|=(128|63&code)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,64<=i?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var blocks=this.blocks,i=this.lastByteIndex;blocks[i>>2]|=EXTRA[3&i],56<=i&&(this.hashed||this.hash(),blocks[0]=blocks[16],blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0),blocks[14]=this.bytes<<3,blocks[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var a,b,c,d,bc,da,blocks=this.blocks;b=this.first?((b=((a=((a=blocks[0]-680876937)<<7|a>>>25)-271733879<<0)^(c=((c=(-271733879^(d=((d=(-1732584194^2004318071&a)+blocks[1]-117830708)<<12|d>>>20)+a<<0)&(-271733879^a))+blocks[2]-1126478375)<<17|c>>>15)+d<<0)&(d^a))+blocks[3]-1316259209)<<22|b>>>10)+c<<0:(a=this.h0,b=this.h1,c=this.h2,((b+=((a=((a+=((d=this.h3)^b&(c^d))+blocks[0]-680876936)<<7|a>>>25)+b<<0)^(c=((c+=(b^(d=((d+=(c^a&(b^c))+blocks[1]-389564586)<<12|d>>>20)+a<<0)&(a^b))+blocks[2]+606105819)<<17|c>>>15)+d<<0)&(d^a))+blocks[3]-1044525330)<<22|b>>>10)+c<<0),b=((b+=((a=((a+=(d^b&(c^d))+blocks[4]-176418897)<<7|a>>>25)+b<<0)^(c=((c+=(b^(d=((d+=(c^a&(b^c))+blocks[5]+1200080426)<<12|d>>>20)+a<<0)&(a^b))+blocks[6]-1473231341)<<17|c>>>15)+d<<0)&(d^a))+blocks[7]-45705983)<<22|b>>>10)+c<<0,b=((b+=((a=((a+=(d^b&(c^d))+blocks[8]+1770035416)<<7|a>>>25)+b<<0)^(c=((c+=(b^(d=((d+=(c^a&(b^c))+blocks[9]-1958414417)<<12|d>>>20)+a<<0)&(a^b))+blocks[10]-42063)<<17|c>>>15)+d<<0)&(d^a))+blocks[11]-1990404162)<<22|b>>>10)+c<<0,b=((b+=((a=((a+=(d^b&(c^d))+blocks[12]+1804603682)<<7|a>>>25)+b<<0)^(c=((c+=(b^(d=((d+=(c^a&(b^c))+blocks[13]-40341101)<<12|d>>>20)+a<<0)&(a^b))+blocks[14]-1502002290)<<17|c>>>15)+d<<0)&(d^a))+blocks[15]+1236535329)<<22|b>>>10)+c<<0,b=((b+=((d=((d+=(b^c&((a=((a+=(c^d&(b^c))+blocks[1]-165796510)<<5|a>>>27)+b<<0)^b))+blocks[6]-1069501632)<<9|d>>>23)+a<<0)^a&((c=((c+=(a^b&(d^a))+blocks[11]+643717713)<<14|c>>>18)+d<<0)^d))+blocks[0]-373897302)<<20|b>>>12)+c<<0,b=((b+=((d=((d+=(b^c&((a=((a+=(c^d&(b^c))+blocks[5]-701558691)<<5|a>>>27)+b<<0)^b))+blocks[10]+38016083)<<9|d>>>23)+a<<0)^a&((c=((c+=(a^b&(d^a))+blocks[15]-660478335)<<14|c>>>18)+d<<0)^d))+blocks[4]-405537848)<<20|b>>>12)+c<<0,b=((b+=((d=((d+=(b^c&((a=((a+=(c^d&(b^c))+blocks[9]+568446438)<<5|a>>>27)+b<<0)^b))+blocks[14]-1019803690)<<9|d>>>23)+a<<0)^a&((c=((c+=(a^b&(d^a))+blocks[3]-187363961)<<14|c>>>18)+d<<0)^d))+blocks[8]+1163531501)<<20|b>>>12)+c<<0,b=((b+=((d=((d+=(b^c&((a=((a+=(c^d&(b^c))+blocks[13]-1444681467)<<5|a>>>27)+b<<0)^b))+blocks[2]-51403784)<<9|d>>>23)+a<<0)^a&((c=((c+=(a^b&(d^a))+blocks[7]+1735328473)<<14|c>>>18)+d<<0)^d))+blocks[12]-1926607734)<<20|b>>>12)+c<<0,b=((b+=((da=(d=((d+=((bc=b^c)^(a=((a+=(bc^d)+blocks[5]-378558)<<4|a>>>28)+b<<0))+blocks[8]-2022574463)<<11|d>>>21)+a<<0)^a)^(c=((c+=(da^b)+blocks[11]+1839030562)<<16|c>>>16)+d<<0))+blocks[14]-35309556)<<23|b>>>9)+c<<0,b=((b+=((da=(d=((d+=((bc=b^c)^(a=((a+=(bc^d)+blocks[1]-1530992060)<<4|a>>>28)+b<<0))+blocks[4]+1272893353)<<11|d>>>21)+a<<0)^a)^(c=((c+=(da^b)+blocks[7]-155497632)<<16|c>>>16)+d<<0))+blocks[10]-1094730640)<<23|b>>>9)+c<<0,b=((b+=((da=(d=((d+=((bc=b^c)^(a=((a+=(bc^d)+blocks[13]+681279174)<<4|a>>>28)+b<<0))+blocks[0]-358537222)<<11|d>>>21)+a<<0)^a)^(c=((c+=(da^b)+blocks[3]-722521979)<<16|c>>>16)+d<<0))+blocks[6]+76029189)<<23|b>>>9)+c<<0,b=((b+=((da=(d=((d+=((bc=b^c)^(a=((a+=(bc^d)+blocks[9]-640364487)<<4|a>>>28)+b<<0))+blocks[12]-421815835)<<11|d>>>21)+a<<0)^a)^(c=((c+=(da^b)+blocks[15]+530742520)<<16|c>>>16)+d<<0))+blocks[2]-995338651)<<23|b>>>9)+c<<0,b=((b+=((d=((d+=(b^((a=((a+=(c^(b|~d))+blocks[0]-198630844)<<6|a>>>26)+b<<0)|~c))+blocks[7]+1126891415)<<10|d>>>22)+a<<0)^((c=((c+=(a^(d|~b))+blocks[14]-1416354905)<<15|c>>>17)+d<<0)|~a))+blocks[5]-57434055)<<21|b>>>11)+c<<0,b=((b+=((d=((d+=(b^((a=((a+=(c^(b|~d))+blocks[12]+1700485571)<<6|a>>>26)+b<<0)|~c))+blocks[3]-1894986606)<<10|d>>>22)+a<<0)^((c=((c+=(a^(d|~b))+blocks[10]-1051523)<<15|c>>>17)+d<<0)|~a))+blocks[1]-2054922799)<<21|b>>>11)+c<<0,b=((b+=((d=((d+=(b^((a=((a+=(c^(b|~d))+blocks[8]+1873313359)<<6|a>>>26)+b<<0)|~c))+blocks[15]-30611744)<<10|d>>>22)+a<<0)^((c=((c+=(a^(d|~b))+blocks[6]-1560198380)<<15|c>>>17)+d<<0)|~a))+blocks[13]+1309151649)<<21|b>>>11)+c<<0,b=((b+=((d=((d+=(b^((a=((a+=(c^(b|~d))+blocks[4]-145523070)<<6|a>>>26)+b<<0)|~c))+blocks[11]-1120210379)<<10|d>>>22)+a<<0)^((c=((c+=(a^(d|~b))+blocks[2]+718787259)<<15|c>>>17)+d<<0)|~a))+blocks[9]-343485551)<<21|b>>>11)+c<<0,this.first?(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)},Md5.prototype.hex=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3;return HEX_CHARS[h0>>4&15]+HEX_CHARS[15&h0]+HEX_CHARS[h0>>12&15]+HEX_CHARS[h0>>8&15]+HEX_CHARS[h0>>20&15]+HEX_CHARS[h0>>16&15]+HEX_CHARS[h0>>28&15]+HEX_CHARS[h0>>24&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[15&h1]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[15&h2]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>8&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[15&h3]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3;return[255&h0,h0>>8&255,h0>>16&255,h0>>24&255,255&h1,h1>>8&255,h1>>16&255,h1>>24&255,255&h2,h2>>8&255,h2>>16&255,h2>>24&255,255&h3,h3>>8&255,h3>>16&255,h3>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var buffer=new ArrayBuffer(16),blocks=new Uint32Array(buffer);return blocks[0]=this.h0,blocks[1]=this.h1,blocks[2]=this.h2,blocks[3]=this.h3,buffer},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var v1,v2,v3,base64Str="",bytes=this.array(),i=0;i<15;)v1=bytes[i++],v2=bytes[i++],v3=bytes[i++],base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[63&(v1<<4|v2>>>4)]+BASE64_ENCODE_CHAR[63&(v2<<2|v3>>>6)]+BASE64_ENCODE_CHAR[63&v3];return v1=bytes[i],base64Str+=BASE64_ENCODE_CHAR[v1>>>2]+BASE64_ENCODE_CHAR[v1<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&define(function(){return exports}))}(),Cookie={setCookie:function(name,value,expires){var seconds=2592e3;(expires||0==expires)&&(seconds=expires);var exp=new Date;exp.setTime(exp.getTime()+1e3*seconds),document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()+";path=/"},getCookie:function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");return(arr=document.cookie.match(reg))?arr[2]:null},delCookie:function(name){var exp=new Date;exp.setTime(exp.getTime()-1);var v=Cookie.getCookie(name);null!=v&&(document.cookie=name+"="+v+";expires="+exp.toGMTString()+";path=/")}},function(){"use strict";var buffer,global={},_Base64=global.Base64;if("undefined"!=typeof module&&module.exports)try{buffer=require("buffer").Buffer}catch(err){}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(bin){for(var t={},i=0,l=bin.length;i<l;i++)t[bin.charAt(i)]=i;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(c){if(c.length<2)return(cc=c.charCodeAt(0))<128?c:cc<2048?fromCharCode(192|cc>>>6)+fromCharCode(128|63&cc):fromCharCode(224|cc>>>12&15)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|63&cc);var cc=65536+1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320);return fromCharCode(240|cc>>>18&7)+fromCharCode(128|cc>>>12&63)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|63&cc)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(u){return u.replace(re_utob,cb_utob)},cb_encode=function(ccc){var padlen=[0,2,1][ccc.length%3],ord=ccc.charCodeAt(0)<<16|(1<ccc.length?ccc.charCodeAt(1):0)<<8|(2<ccc.length?ccc.charCodeAt(2):0);return[b64chars.charAt(ord>>>18),b64chars.charAt(ord>>>12&63),2<=padlen?"=":b64chars.charAt(ord>>>6&63),1<=padlen?"=":b64chars.charAt(63&ord)].join("")},btoa=global.btoa?function(b){return global.btoa(b)}:function(b){return b.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?function(u){return(u.constructor===buffer.constructor?u:new buffer(u)).toString("base64")}:function(u){return btoa(utob(u))},encode=function(u,urisafe){return urisafe?_encode(String(u)).replace(/[+\/]/g,function(m0){return"+"==m0?"-":"_"}).replace(/=/g,""):_encode(String(u))},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(cccc){switch(cccc.length){case 4:var offset=((7&cccc.charCodeAt(0))<<18|(63&cccc.charCodeAt(1))<<12|(63&cccc.charCodeAt(2))<<6|63&cccc.charCodeAt(3))-65536;return fromCharCode(55296+(offset>>>10))+fromCharCode(56320+(1023&offset));case 3:return fromCharCode((15&cccc.charCodeAt(0))<<12|(63&cccc.charCodeAt(1))<<6|63&cccc.charCodeAt(2));default:return fromCharCode((31&cccc.charCodeAt(0))<<6|63&cccc.charCodeAt(1))}},btou=function(b){return b.replace(re_btou,cb_btou)},cb_decode=function(cccc){var len=cccc.length,padlen=len%4,n=(0<len?b64tab[cccc.charAt(0)]<<18:0)|(1<len?b64tab[cccc.charAt(1)]<<12:0)|(2<len?b64tab[cccc.charAt(2)]<<6:0)|(3<len?b64tab[cccc.charAt(3)]:0),chars=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return chars.length-=[0,0,2,1][padlen],chars.join("")},atob=global.atob?function(a){return global.atob(a)}:function(a){return a.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?function(a){return(a.constructor===buffer.constructor?a:new buffer(a,"base64")).toString()}:function(a){return btou(atob(a))},decode=function(a){return _decode(String(a).replace(/[-_]/g,function(m0){return"-"==m0?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(global.Base64={VERSION:"2.1.9",atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:function(u){return encode(u,!0)},btou:btou,decode:decode,noConflict:function(){var Base64=global.Base64;return global.Base64=_Base64,Base64}},"function"==typeof Object.defineProperty){var noEnum=function(v){return{value:v,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(urisafe){return encode(this,urisafe)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}window.Base64=global.Base64}();var Global={MESSAGE_COLOR:10066329,OKCODE:100,RED_COLOR:16711680,YES:"yes",OK:"ok",NO:"no",DEFAULT_ROOT_ID:"0",CNF_RES_HEAD_LOGO:"image/head_logo.jpg",CNF_RES_HOME_TAB_ICON:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEIxODAxNjRFMzZGMTFFNDg0RUNFQzIzM0Q3MjY1NjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEIxODAxNjVFMzZGMTFFNDg0RUNFQzIzM0Q3MjY1NjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4QjE4MDE2MkUzNkYxMUU0ODRFQ0VDMjMzRDcyNjU2NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4QjE4MDE2M0UzNkYxMUU0ODRFQ0VDMjMzRDcyNjU2NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Poo/jTQAAAD9SURBVHjajJKxDgFBEIbt5RIJQeEtlJ6AJ9Gp0NxpPIBKIWjUXkWiU56HQEFyhBD+kX+TyWV3Y5MvOzsz/3+zlzXTbacUWAvuI19DHBDPwJDxE6SupiggTtQ5Ye4vg6I4aBIFxHfGCWOnSewR78EA7HiWfQXaqie1EwhzVViCrhJbgy5rdhLRRDLBBPRZuIIxeDj+ga31QJ2akxiswQZknKbsMSixJj030JJdDI6gCj7AEN+ydek9gTwOPCjDUe34H9cjjAJfq/FaGeO/n/KL+xs0VaxrXgNDkeQbSqhzRl+naFABB/VDK8wXc3nRQIpnjqhzF0ffhfym+AowALQfQLdv+UB7AAAAAElFTkSuQmCC",API_INIT_LIST:{Module:{getTreeModules:{}},Admin:{getTimerTaskData:{}},Statistics:{getSevenDay:{},getTodayDayHours:{}}},LISTENERS:{loadTreeModule:function(me,apis,module,fn){apis.module.getTreeModules.call({module:module},function(children){me.modulesStore=Ext.create("Ext.data.TreeStore",{root:{expanded:!0,children:children}}),fn(me.modulesStore)})}}},ApplicationLoaderViews=[],Color,Dialog,ExtRPCMapping,Language,ObjectUtils,Resource,ApplicationLoader,RequestContainer;!function(){var config_empty="",config_icon="icon",config_png=".png",config_gif=".gif",config_jpg=".jpg",config_jpeg=".jpeg";Resource={create:function(uri){return uri},image:function(fileName){return this.file(fileName)},file:function(fileName){if(fileName||""==fileName)return 0===fileName.indexOf("data:image")?fileName:0==fileName.indexOf("http://")||0==fileName.indexOf("HTTP://")?fileName:Global.CNF_RES_FILE_URL.format(fileName)},icon:function(key,name){return key!=config_icon&&key||(key=config_empty),Global.CNF_RES_ICON_URL.format(key)+name},png:function(key,name){return this.icon(key,name+config_png)},gif:function(key,name){return this.icon(key,name+config_gif)},jpg:function(key,name){return this.icon(key,name+config_jpg)},jpeg:function(key,name){return this.icon(key,name+config_jpeg)},getNoneImage:function(size){return size||(size=60),Global.CNF_RES_NONE_URL.format(size)},hash:function(key,value){try{var hash=window.location.hash||this.config.empty,exist=!1;if(!value)return;var indexOf=hash.indexOf(key+"="),hss=hash.split("#");if(0<=indexOf){for(var i in hash="",hss)""!=hss[i]&&hash.indexOf(hss[i])<0&&(0<=hss[i].indexOf(key+"=")?(exist=!0,hash+="#"+key+"="+value):hash+="#"+hss[i]);exist||(hash+="#"+key+"="+value),window.location.hash=hash}else window.location.hash=hash+"#"+key+"="+value}catch(e){}},getHash:function(key){try{var hss=window.location.hash.split("#");for(var i in hss)if(hss[i]){var kv=hss[i].split("=");if(kv[0]&&kv[0]==key)return kv[1]}}catch(e){}}}}(),Number.prototype.formatMoney=function(places,symbol,thousand,decimal){places=isNaN(places=Math.abs(places))?2:places,symbol=void 0!==symbol?symbol:"￥",thousand=thousand||",",decimal=decimal||".";var number=this,negative=number<0?"-":"",i=parseInt(number=Math.abs(+number||0).toFixed(places),10)+"",j=3<(j=i.length)?j%3:0;return symbol+negative+(j?i.substr(0,j)+thousand:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousand)+(places?decimal+Math.abs(number-i).toFixed(places).slice(2):"")},Number.prototype.formatRMB=function(){return this.formatMoney(2,"￥",",",".")},ObjectUtils={merge:function(){var obj={},args=Array.prototype.slice.apply(arguments);if(args)for(var i=0;i<args.length;i++){var v=args[i];if(v)for(var key in v)obj[key]=v[key]}return obj}};var PriceUtils={},ApplicationTreeStoreWrapper;!function(PriceUtils){PriceUtils.string=function(price){var bl=(""+parseFloat(price).toFixed(2)).split("."),b=bl[0],l=bl[1]||"";return b+"."+(l=0==(l=1==(l=2<=l.length?l.substring(0,2):l).length?l+"0":l).length?l+"00":l)},PriceUtils.valid=function(price){var bl=(""+price).split(".");bl[0];return 2==(bl[1]||"").length},PriceUtils.longToPrice=function(price){return"string"==typeof price&&(price=parseFloat(price)),price/100}}(PriceUtils),String.prototype.format=function(){if(0==arguments.length)return this;for(var result=this,i=0;i<arguments.length;i++)result=result.replace(new RegExp("\\{"+i+"\\}","g"),arguments[i]);return result},String.isNotEmpty=function(obj){return!this.isEmpty(obj)},String.isEmpty=function(obj){return""===obj||null==obj||null==obj},Array.splitArray=function(arr,key){return Ext.isArray(arr)?Array.getObjectItems(arr,key):Ext.isObject(arr)&&arr[key]?[arr[key]]:[]},Array.getObjectItems=function(arr,n){for(var items=[],j=0;j<arr.length;j++){var obj=arr[j];obj instanceof Object&&items.push(obj[n])}return items},Date.prototype.format=function(fmt){fmt=fmt||"yyyy-MM-dd HH:mm:ss";var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var k in/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(1<RegExp.$1.length?2<RegExp.$1.length?"星期":"周":"")+{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"}[this.getDay()+""])),o)new RegExp("("+k+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return fmt},Date.formatToObject=function(obj,key){var value=obj[key],date=null;return value instanceof Date?date=value:isNaN(value)?value instanceof Object&&(date=new Date(value.time)):date=new Date(parseFloat(value)),date&&(obj[key]=date.format("yyyy-MM-dd HH:mm:ss")),obj},RequestContainer=function(url,type){this._url=url,this._httpType=type,this._formData=new FormData,this._xmlHttp=new XMLHttpRequest},RequestContainer.prototype.setUrl=function(url){this._url=url},RequestContainer.prototype.append=function(name,value){this._formData.append(name,value)},RequestContainer.prototype.submit=function(){this._xmlHttp.open(this._httpType||"post",this._url),this._xmlHttp.send(this._formData)},RequestContainer.prototype.abort=function(){this._xmlHttp.abort()},RequestContainer.prototype.addListener=function(type,fun){this._xmlHttp.addEventListener(type,fun)},RequestContainer.prototype.addUploadListener=function(type,fun,opts){this._xmlHttp.upload.addEventListener(type,fun,opts)},RequestContainer.prototype.addReadyStateChangeListener=function(fun){this.addListener("readystatechange",fun)},RequestContainer.prototype.addUploadProgressListener=function(fun,opts){this.addUploadListener("progress",fun,opts)},RequestContainer.prototype.addUploadErrorListener=function(fun,opts){this.addUploadListener("error",fun,opts)},Ext.override(Ext.Component,{initComponent:function(){this.callParent();var apis=this.apis;if(apis){var className=Ext.getClassName(this);for(var i in apis)for(var j in apis[i])(params=apis[i][j])&&(params instanceof ExtRPCMapping||(params._isInstance?(rpc=new ExtRPCMapping(params.module,params.method,params.params.params,params.page))._url=params._url:(rpc=new ExtRPCMapping(i,j,params,className))._url=Global.CNF_API_URL,this.apis[i][j]=rpc))}var api=this.api;if(api){var rpc=null;for(var i in api)for(var j in api[i]){var params;(params=api[i][j])&&(params instanceof ExtRPCMapping?rpc=params:((rpc=new ExtRPCMapping(i,j,params,className))._url=Global.CNF_API_URL,this.api[i][j]=rpc))}if(Ext&&Ext.grid&&Ext.grid.Panel&&this instanceof Ext.grid.Panel||Ext&&Ext.form&&Ext.form.ComboBox&&this instanceof Ext.form.ComboBox){var store=rpc.createPageStore();this instanceof Ext.form.ComboBox?this.bindStore(store):this instanceof Ext.grid.Panel&&this.setStore(store),this.apiDelay||store.load()}else Ext&&Ext.tree&&Ext.tree.Panel&&this instanceof Ext.tree.Panel&&(store=rpc.createTreeStore(),this.setStore(store),this.apiDelay||store.load())}},finds:function(opts){if(Ext.isString(opts)){if(0!=opts.indexOf("[")&&opts){if(this.name==opts)return this;opts="[name="+opts+"]"}var cmps=Ext.ComponentQuery.query(opts,this);if(cmps)return cmps}},find:function(opts){if(Ext.isString(opts)){var cmps=this.finds(opts);if(cmps)return cmps[0]}},enableChildren:function(){for(var args=arguments,i=0;i<args.length;i++)try{this.find(args[i]).enable()}catch(e){}},disableChildren:function(){for(var args=arguments,i=0;i<args.length;i++)try{this.find(args[i]).disable()}catch(e){}}}),Ext.override(Ext.data.Store,{onProxyLoad:function(obj){this.callParent(arguments);try{var text=obj.getResponse().responseText,json=JSON.parse(text);null!=json.code&&null!=json.code&&(json.code===Global.OKCODE||0===json.code||(10==json.code?Dialog.alert(Language("提示"),Language("服务器异常！")+"</br>"+Language("异常描述")+":"+json.msg+"</br>"+Language("返回码")+":"+json.code,Dialog.ERROR):-100==json.code?Dialog.alert(Language("提示"),Language("访问权限受限！")+"</br>"+Language("权限描述")+":"+json.msg+"</br>"+Language("返回码")+":"+json.code,Dialog.ERROR):Dialog.alert(Language("提示"),Language("访问出错！")+"</br>"+Language("错误描述")+":"+json.msg+"</br>"+Language("返回码")+":"+json.code,Dialog.ERROR)))}catch(e){}},reloadMember:function(params){var old=this.proxy&&this.proxy.extraParams?this.proxy.extraParams:{},np=ObjectUtils.merge(old,params);this.load({params:np})},reloadReset:function(params){var old=this.proxy&&this.proxy.extraParams?this.proxy.extraParams:{},np=ObjectUtils.merge(old,params);"Ext.data.proxy.Ajax"==Ext.getClassName(this.proxy)&&this.proxy.setExtraParams(np),this.load()}}),Ext.override(Ext.form.Label,{onRender:function(){this.callParent(arguments);var self=this;this.getEl().on("click",function(e){self.fireEvent("click",self,e)})}}),function(){(ApplicationTreeStoreWrapper=function(store){this._store=store,this._store._wrapper=this;var items=store.getData().items;if(store.on("nodeexpand",function(data,eOpts){this._wrapper._loadExtends(data.getData())}),items&&0<items.length)for(var i=0;i<items.length;i++){var data=items[i].getData();this._loadExtends(data)}}).prototype.reload=function(id){var wrapper=this.find(id);wrapper&&wrapper.loading(function(){var self=this;Ext.Ajax.request({url:data.url,params:{},method:"GET",callback:{wrapper:this,tid:data.id},success:function(response,opts){if(self._node.set("loading",!1),response.responseText&&""!=response.responseText){var obj=Ext.decode(response.responseText);opts.callback.wrapper.reset(obj.data)}},failure:function(){self._node.set("loading",!1),Dialog.alert(Language("加载扩展功能菜单失败!"))}})})},ApplicationTreeStoreWrapper.prototype._loadExtends=function(data){if(1==data.expanded&&"extension"==data.type&&data.url){var wrapper=this.find(data.id);wrapper&&wrapper.loading(function(){var self=this;Ext.Ajax.request({url:data.url,params:{},method:"GET",callback:{wrapper:this,tid:data.id},success:function(response,opts){if(self._node.set("loading",!1),response.responseText&&""!=response.responseText){var obj=Ext.decode(response.responseText);opts.callback.wrapper.reset(obj.data)}},failure:function(){self._node.set("loading",!1),Dialog.alert(Language("加载扩展功能菜单失败!"))}})})}},ApplicationTreeStoreWrapper.prototype.find=function(id){var node=this._store.findNode("id",id);return node?new ApplicationTreeStoreNodeWrapper(node):null},ApplicationTreeStoreWrapper.prototype.reload=function(id){var node=this._store.findNode("id",id);if(node){var data=node.getData();this._loadExtends(data)}};var ApplicationTreeStoreNodeWrapper=function(node){this._node=node};ApplicationTreeStoreNodeWrapper.prototype.append=function(json){this._node.appendChild(json)},ApplicationTreeStoreNodeWrapper.prototype.remove=function(id){var cn=this._node.findChild("id",id);cn&&this._node.removeChild(cn)},ApplicationTreeStoreNodeWrapper.prototype.clear=function(){this._node.removeAll()},ApplicationTreeStoreNodeWrapper.prototype.reset=function(arr){if(this.clear(),arr)for(var i=0;i<arr.length;i++)this.append(arr[i])},ApplicationTreeStoreNodeWrapper.prototype.loading=function(fn){this._node.set("loading",!0);try{fn.call(this)}catch(e){}}}(),Ext.override(Ext.grid.Panel,{viewConfig:{enableTextSelection:!0},disableScrollOnClickCell:!0}),Ext.override(Ext.tree.Panel,{viewConfig:{enableTextSelection:!0},disableScrollOnClickCell:!0}),Ext.override(Ext.panel.Table,{defaultStoreId:"id",getSelects:function(key){var selections=null;if(this.getSelectionModel&&(selections=this.getSelectionModel().getSelection()),null==selections||selections.length<=0)return null;for(var ids=[],i=0;i<selections.length;i++)if(key){var id=selections[i].get(key);ids[i]=id}else{var data=selections[i].getData();ids[i]=data}return ids},getSelect:function(key){var sls=this.getSelects(key);return sls&&0<sls.length?sls[0]:null},getIgnoreSelects:function(args,key){if(args&&args.length){var grid=args[0];if(isNaN(args[1]))return this.getSelects(key);var record=grid.store.getAt(args[1]);return this.store!=grid.store?this.getSelects(key):"string"==typeof key?[record.get(key)]:[record.getData()]}return this.getSelects(this)},getIgnoreSelect:function(args,key){var list=this.getIgnoreSelects(args,key);if(list)return list[0]},refreshStore:function(opts){this.getStore().load(opts)},emptyStore:function(opts){this instanceof Ext.tree.Panel?this.setStore(Ext.create("Ext.data.TreeStore",{root:{expanded:!0,children:[]}})):this.setStore(Ext.create("Ext.data.Store",{data:[]}))},getRecords:function(){var selections=null;if(this.getSelectionModel&&(selections=this.getSelectionModel().getSelection()),null==selections||selections.length<=0)return null;var ds=[];for(var i in selections)ds.push(selections[i]);return ds},getRecord:function(){var r=this.getRecords();return r&&0<r.length?r[0]:null},addRecord:function(data,pid){var store=this.getStore();if(store instanceof Ext.data.TreeStore){var node=store.getNodeById(pid);node.appendChild(data),node.expand()}else store.add(json)},editRecord:function(data,id){var store=this.getStore();if(data instanceof Ext.data.Model)data.commit();else{id||(id=data[this.defaultStoreId]);var model=store.getById(id);for(var i in data)model.set(i,data[i]);model.commit()}},removeRecord:function(data,idName){var id,store=this.getStore();if(idName=idName||this.defaultStoreId,data instanceof Ext.data.Model)store.remove(data);else{id=Ext.isObject(data)?data[idName]:data;for(var i=0;i<store.getCount();i++)if(store.getAt(i).get(idName)==id){store.removeAt(i);break}}}}),Ext.override(Ext.grid.NavigationModel,{focusItem:function(item){this.view&&this.view.panel&&this.view.panel.disableScrollOnClickCell||(item.addCls(this.focusCls),item.focus())}}),Ext.override(Ext.scroll.Scroller,{scrollIntoView:function(el,hscroll,animate,highlight){var newPosition,newX,newY,me=this,position=me.getPosition(),myEl=me.getElement(),component=me.component,isScroll=!0;component&&component.grid&&component.grid.disableScrollOnClickCell&&(isScroll=!1),el&&isScroll&&(newPosition=Ext.fly(el).getScrollIntoViewXY(myEl,position.x,position.y),newX=!1===hscroll?position.x:newPosition.x,(newY=newPosition.y)!==position.y||newX!==position.x?(highlight&&me.on({scrollend:"doHighlight",scope:me,single:!0,args:[el,highlight]}),me.doScrollTo(newX,newY,animate)):highlight&&me.doHighlight(el,highlight))}}),Ext.override(Ext.grid.CellContext,{setRow:function(row){var count,me=this,dataSource=me.view.dataSource,oldRecord=me.record;return void 0!==row&&row&&("number"==typeof row?(count=dataSource.getCount(),row=row<0?Math.max(count+row,0):Math.max(Math.min(row,count-1),0),me.rowIdx=row,me.record=dataSource.getAt(row)):row&&row.isModel?(me.record=row,me.rowIdx=dataSource.indexOf(row)):(row.tagName||row.isElement)&&(me.record=me.view.getRecord(row),me.rowIdx=dataSource.indexOf(me.record))),me.record!==oldRecord&&me.generation++,me}}),(ExtRPCMapping=function(clazz,method,params,page){this.module=clazz,this.method=method,this.params=params,this.page=page,this._isInstance=!0}).prototype.info=function(opts){opts=opts||{};var page=this.page||(this.params?this.params._page:null),post=ObjectUtils.merge(opts,this.params,{_page:page});if(this.module&&this.method&&page){for(var i in post){var j=post[i];"object"!=typeof j&&"array"!=typeof j||(post[i]=JSON.stringify(j)),"function"==typeof j&&(post[i]="")}if(this._url)return{url:this._url.format(this.module,this.method),data:post}}else Dialog.alert(Language("提示"),Language("访问参数缺失或者无效！"))},ExtRPCMapping.prototype.mask=function(view,string){return this._maskView=view,this._maskViewString=string,this},ExtRPCMapping.prototype.wait=function(view,string){return this.mask(view,string),this},ExtRPCMapping.prototype.disable=function(value,names){if(value&&names)for(var i=0;i<names.length;i++)try{var cmp=value.find(names[i]);cmp&&cmp.disable()}catch(e){}return this._disableViews={view:value,names:names},this},ExtRPCMapping.prototype.enable=function(value,names){try{if(value&&names)for(var i=0;i<names.length;i++)try{var cmp=value.find(names[i]);cmp&&cmp.enable()}catch(e){}}catch(e){}return this},ExtRPCMapping.prototype.call=function(opts,success,failure){var self=this,kv=this.info(opts);if(self._maskView)try{self._maskView.mask(Language(self._maskViewString||"正在加载中..."))}catch(e){}return Ext.Ajax.request({url:kv.url,params:kv.data,method:"POST",success:function(response,opts){if(self._maskView)try{self._maskView.unmask()}catch(e){}if(self._disableViews&&self.enable(self._disableViews.view,self._disableViews.names),response.responseText&&""!=response.responseText){var obj=Ext.decode(response.responseText);null==obj.code||null==obj.code||""==obj.code||"0"==obj.code||0==obj.code?success&&success(obj):obj.code===Global.OKCODE?success&&success(obj.data):(!failure||failure&&0!=failure(response,opts))&&(10==obj.code?Dialog.alert(Language("提示"),Language("服务器异常！")+"</br>"+Language("异常描述")+":"+obj.msg+"</br>"+Language("返回码")+":"+obj.code,Dialog.ERROR):1e4==obj.code?Dialog.alert(Language("提示"),Language("访问权限受限！")+"</br>"+Language("权限描述")+":"+obj.msg+"</br>"+Language("返回码")+":"+obj.code,Dialog.ERROR):Dialog.alert(Language("提示"),Language("访问出错！")+"</br>"+Language("错误描述")+":"+obj.msg+"</br>"+Language("返回码")+":"+obj.code,Dialog.ERROR))}else success&&success(response.responseText)},failure:function(response,opts){if(self._maskView)try{self._maskView.unmask()}catch(e){}if(self._disableViews&&self.enable(self._disableViews.view,self._disableViews.names),200!=response.status){var showError=!0;failure&&(showError=!failure(response)),showError&&Dialog.alert(Language("提示"),Language("网络错误！")+Language("错误码")+":"+response.status,Dialog.ERROR)}}}),this},ExtRPCMapping.prototype.createPageStore=function(opts,callback){var data=this.info(opts instanceof Function?{}:opts);opts instanceof Function&&(callback=opts);var store=Ext.create("Ext.data.Store",{proxy:{type:"ajax",url:data.url,extraParams:data.data||{},reader:{type:"json",root:"records",totalProperty:"total"}},callback:callback});return store.addListener("datachanged",function(records,operation,success){this.callback&&this.callback(records,operation,success)}),store},ExtRPCMapping.prototype.createListStore=function(opts,callback){var data=this.info(opts instanceof Function?{}:opts);opts instanceof Function&&(callback=opts);var store=Ext.create("Ext.data.Store",{proxy:{type:"ajax",url:data.url,extraParams:data.data||{},reader:{type:"json",root:"data",totalProperty:"total"}},callback:callback});return store.addListener("datachanged",function(records,operation,success){this.callback&&this.callback(records,operation,success)}),store},ExtRPCMapping.prototype.createTreeStore=function(opts,callback){var data=this.info(opts instanceof Function?{}:opts);opts instanceof Function&&(callback=opts);var reader=opts.reader||"json",root=opts.root||{expanded:!0,text:Language("树菜单功能")},store=Ext.create("Ext.data.TreeStore",{proxy:{type:"ajax",url:data.url,extraParams:data.data||{},reader:reader},root:root,callback:callback});return store.addListener("datachanged",function(records,operation,success){this.callback&&this.callback(records,operation,success)}),store},ApplicationLoaderViews.push(function(){Ext.define("BaseAppButton",{extend:"Ext.button.Button",border:!1,alias:"exbutton",cls:"ex_button",overCls:"ex_button_over",constructor:function(){this.callParent(arguments)},initComponent:function(){this.callParent(arguments)},getVar:function(name){return this[name]},setVar:function(name,value){this[name]=value},setSelected:function(){var dom=this.getEl().dom;dom.style.borderRadius="0px",dom.style.backgroundColor="rgb(222,222,222)"},setUnSelected:function(){this.getEl().dom.style.backgroundColor=null}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseApp.picker.DateTime",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.button.Button","Ext.button.Split","Ext.util.ClickRepeater","Ext.util.KeyNav","Ext.fx.Manager","Ext.picker.Month"],alias:"widget.datetimepicker",alternateClassName:"Ext.DateTimePicker",okText:"确定",todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",ariaMinText:"This date is before the minimum date",maxText:"This date is after the maximum date",ariaMaxText:"This date is after the maximum date",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date is disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:!0,disableAnim:!1,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",footerButtonUI:"default",isDatePicker:!0,alignOnScroll:!1,ariaRole:"region",focusable:!0,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:!0,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0" aria-readonly="true">',"<thead>",'<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr>","</thead>","<tbody>",'<tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr>","</tbody>","</table>",'<table id="{id}-timeEl" style="table-layout:auto;margin:0 auto;width:90%;text-align:center;" class="x-datepicker-inner" cellspacing="0">',"<tbody><tr>",'<td width="30%">{%this.renderHourField(values,out)%}</td>','<td width="35%">{%this.renderMinuteField(values,out)%}</td>','<td width="35%">{%this.renderSecondField(values,out)%}</td>',"</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">',"{%this.renderOkBtn(values, out)%}","{%this.renderTodayBtn(values, out)%}","</div>","</tpl>",'<div id="{id}-todayText" class="'+Ext.baseCSSPrefix+'hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDatesText}.</div>',"</div>",{firstInitial:function(value){return Ext.picker.Date.prototype.getDayInitial(value)},isEndOfWeek:function(value){return--value%7==0&&0!==value?'</tr><tr role="row">':""},renderTodayBtn:function(values,out){Ext.DomHelper.generateMarkup(values.$comp.todayBtn.getRenderTree(),out)},renderMonthBtn:function(values,out){Ext.DomHelper.generateMarkup(values.$comp.monthBtn.getRenderTree(),out)},renderHourField:function(values,out){Ext.DomHelper.generateMarkup(values.$comp.hourField.getRenderTree(),out)},renderMinuteField:function(values,out){Ext.DomHelper.generateMarkup(values.$comp.minuteField.getRenderTree(),out)},renderSecondField:function(values,out){Ext.DomHelper.generateMarkup(values.$comp.secondField.getRenderTree(),out)},renderOkBtn:function(values,out){Ext.DomHelper.generateMarkup(values.$comp.okBtn.getRenderTree(),out)}}],initHour:12,numDays:42,initComponent:function(){var me=this;me.selectedCls=me.baseCls+"-selected",me.disabledCellCls=me.baseCls+"-disabled",me.prevCls=me.baseCls+"-prevday",me.activeCls=me.baseCls+"-active",me.cellCls=me.baseCls+"-cell",me.nextCls=me.baseCls+"-prevday",me.todayCls=me.baseCls+"-today",me.format||(me.format=Ext.Date.defaultFormat),me.dayNames||(me.dayNames=Ext.Date.dayNames),me.dayNames=me.dayNames.slice(me.startDay).concat(me.dayNames.slice(0,me.startDay)),me.callParent(),me.value=me.value?me.value:new Date,me.initDisabledDays()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var results=[],monthBtn=this.monthBtn,todayBtn=this.todayBtn;return monthBtn&&results.push(monthBtn),todayBtn&&results.push(todayBtn),results},beforeRender:function(){var me=this,encode=Ext.String.htmlEncode,days=new Array(me.numDays),today=Ext.Date.format(new Date,me.format);me.padding&&!me.width&&me.cacheWidth(),me.hourField=new Ext.form.field.Number({ownerCt:me,ownerLayout:me.getComponentLayout(),minValue:0,maxValue:23,step:1,width:"100%",enableKeyEvents:!0,listeners:{specialkey:function(field,e){e.getKey()==e.ENTER&&(e.stopEvent(),me.minuteField.focus(!0))}}}),me.minuteField=new Ext.form.field.Number({ownerCt:me,ownerLayout:me.getComponentLayout(),minValue:0,maxValue:59,step:1,width:"100%",labelWidth:10,fieldLabel:"&nbsp;",enableKeyEvents:!0,listeners:{specialkey:function(field,e){e.getKey()==e.ENTER&&(e.stopEvent(),me.secondField.focus(!0))}}}),me.secondField=new Ext.form.field.Number({ownerCt:me,ownerLayout:me.getComponentLayout(),minValue:0,maxValue:59,step:1,width:"100%",labelWidth:10,fieldLabel:"&nbsp;",enableKeyEvents:!0,listeners:{specialkey:function(field,e){e.getKey()==e.ENTER&&(e.stopEvent(),me.okBtn.focus(!0))}}}),me.monthBtn=new Ext.button.Split({ownerCt:me,ownerLayout:me.getComponentLayout(),text:"",tooltip:me.monthYearText,tabIndex:-1,ariaRole:"presentation",listeners:{click:me.doShowMonthPicker,arrowclick:me.doShowMonthPicker,scope:me}}),me.showToday&&(me.okBtn=new Ext.button.Button({ui:me.footerButtonUI,ownerCt:me,ownerLayout:me.getComponentLayout(),text:me.okText,handler:me.okHandler,scope:me}),me.todayBtn=new Ext.button.Button({ui:me.footerButtonUI,ownerCt:me,ownerLayout:me.getComponentLayout(),text:Ext.String.format(me.todayText,today),tooltip:Ext.String.format(me.todayTip,today),tooltipType:"title",tabIndex:-1,ariaRole:"presentation",handler:me.selectToday,scope:me})),me.callParent(),Ext.applyIf(me,{renderData:{}}),Ext.apply(me.renderData,{dayNames:me.dayNames,showToday:me.showToday,prevText:encode(me.prevText),nextText:encode(me.nextText),todayText:encode(me.todayText),ariaMinText:encode(me.ariaMinText),ariaMaxText:encode(me.ariaMaxText),ariaDisabledDaysText:encode(me.ariaDisabledDaysText),ariaDisabledDatesText:encode(me.ariaDisabledDatesText),days:days}),me.protoEl.unselectable()},okHandler:function(){var me=this,btn=me.okBtn;btn&&!btn.disabled&&(me.setValue(this.getValue()),me.fireEvent("select",me,me.value),me.onSelect())},cacheWidth:function(){var me=this,padding=me.parseBox(me.padding),widthEl=Ext.getBody().createChild({cls:me.baseCls+" "+me.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});me.self.prototype.width=widthEl.getWidth()+padding.left+padding.right,widthEl.destroy()},onRender:function(container,position){var me=this;me.callParent(arguments),me.cells=me.eventEl.select("tbody td"),me.textNodes=me.eventEl.query("tbody td div"),me.eventEl.set({"aria-labelledby":me.monthBtn.id}),me.mon(me.eventEl,{scope:me,mousewheel:me.handleMouseWheel,click:{fn:me.handleDateClick,delegate:"div."+me.baseCls+"-date"}})},initEvents:function(){var me=this;me.callParent(),me.pickerField&&me.el.on("mousedown",me.onMouseDown,me),me.monthBtn.el.on("mousedown",me.onMouseDown,me),me.prevRepeater=new Ext.util.ClickRepeater(me.prevEl,{handler:me.showPrevMonth,scope:me,mousedownStopEvent:!0}),me.nextRepeater=new Ext.util.ClickRepeater(me.nextEl,{handler:me.showNextMonth,scope:me,mousedownStopEvent:!0}),me.keyNav=new Ext.util.KeyNav(me.eventEl,Ext.apply({scope:me,left:function(e){e.ctrlKey?this.showPrevMonth():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-1)),e.preventDefault()},right:function(e){e.ctrlKey?this.showNextMonth():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,1)),e.preventDefault()},up:function(e){e.ctrlKey?this.showNextYear():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-7)),e.preventDefault()},down:function(e){e.ctrlKey?this.showPrevYear():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,7)),e.preventDefault()},pageUp:function(e){e.ctrlKey?this.showPrevYear():this.showPrevMonth(),e.preventDefault()},pageDown:function(e){e.ctrlKey?this.showNextYear():this.showNextMonth(),e.preventDefault()},home:function(e){this.update(Ext.Date.getFirstDateOfMonth(this.activeDate)),e.preventDefault()},end:function(e){this.update(Ext.Date.getLastDateOfMonth(this.activeDate)),e.preventDefault()},tab:function(e){return this.handleTabKey(e),!0},enter:function(e){this.handleDateClick(e,this.activeCell.firstChild)},space:function(e){var startValue,value,pickerValue,me=this,pickerField=me.pickerField;me.setValue(new Date(me.activeCell.firstChild.dateValue)),pickerField&&(startValue=me.startValue,value=me.value,(pickerValue=pickerField.getValue())&&startValue&&pickerValue.getTime()===value.getTime()?pickerField.setValue(startValue):pickerField.setValue(value)),e.preventDefault()}},me.keyNavConfig)),me.disabled&&me.syncDisabled(!0,!0),me.update(me.value)},onMouseDown:function(e){0!==e.target.id.indexOf("numberfield")&&e.preventDefault()},handleTabKey:function(e){var me=this,t=me.getSelectedDate(me.activeDate),handler=me.handler;me.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(me.disabledCellCls)?me.fireEventArgs("tabout",[me]):(me.setValue(new Date(t.dateValue)),me.fireEvent("select",me,me.value),handler&&handler.call(me.scope||me,me,me.value),me.onSelect())},getSelectedDate:function(date){var cell,c,t=date.getTime(),cells=this.cells,cls=this.selectedCls,cellItems=cells.elements,cLen=cellItems.length;for(cells.removeCls(cls),c=0;c<cLen;c++)if((cell=cellItems[c].firstChild).dateValue===t)return cell;return null},initDisabledDays:function(){var len,d,dLen,dI,dd=this.disabledDates,re="(?:";if(!this.disabledDatesRE&&dd){for(len=dd.length-1,dLen=dd.length,d=0;d<dLen;d++)dI=dd[d],re+=Ext.isDate(dI)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(dI,this.format))+"$":dI,d!==len&&(re+="|");this.disabledDatesRE=new RegExp(re+")")}},setDisabledDates:function(dd){var me=this;return Ext.isArray(dd)?(me.disabledDates=dd,me.disabledDatesRE=null):me.disabledDatesRE=dd,me.initDisabledDays(),me.update(me.value,!0),me},setDisabledDays:function(dd){return this.disabledDays=dd,this.update(this.value,!0)},setMinDate:function(dt){return this.minDate=dt,this.update(this.value,!0)},setMaxDate:function(dt){return this.maxDate=dt,this.update(this.value,!0)},setValue:function(value,isfixed){return this.value=Ext.Date.clone(value||new Date),!0!==isfixed&&(this.value.setHours(this.hourField.getValue()),this.value.setMinutes(this.minuteField.getValue()),this.value.setSeconds(this.secondField.getValue())),this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(value){return value.substr(0,1)},onEnable:function(){this.callParent(),this.syncDisabled(!1,!0),this.update(this.activeDate)},onShow:function(){var me=this;me.callParent(),me.syncDisabled(!1),me.pickerField&&(me.startValue=me.pickerField.getValue())},onHide:function(){this.callParent(),this.syncDisabled(!0)},onDisable:function(){this.callParent(),this.syncDisabled(!0,!0)},getActive:function(){return this.activeDate||this.value},runAnimation:function(isHide){var picker=this.monthPicker,options={duration:200,callback:function(){picker.setVisible(!isHide)}};isHide?picker.el.slideOut("t",options):picker.el.slideIn("t",options)},hideMonthPicker:function(animate){var picker=this.monthPicker;return picker&&picker.isVisible()&&(this.shouldAnimate(animate)?this.runAnimation(!0):picker.hide()),this},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(animate){var picker,me=this,el=me.el;return me.rendered&&!me.disabled&&((picker=me.createMonthPicker()).isVisible()||(picker.setValue(me.getActive()),picker.setSize(el.getSize()),picker.floatParent=null,picker.setPosition(-el.getBorderWidth("l"),-el.getBorderWidth("t")),me.shouldAnimate(animate)?me.runAnimation(!1):picker.show())),me},shouldAnimate:function(animate){return Ext.isDefined(animate)?animate:!this.disableAnim},createMonthPicker:function(){var me=this,picker=me.monthPicker;return picker||(me.monthPicker=picker=new Ext.picker.Month({renderTo:me.el,ownerCmp:me,floating:!0,padding:me.padding,shadow:!1,small:!1===me.showToday,footerButtonUI:me.footerButtonUI,listeners:{scope:me,cancelclick:me.onCancelClick,okclick:me.onOkClick,yeardblclick:me.onOkClick,monthdblclick:me.onOkClick}}),me.disableAnim||picker.el.setStyle("display","none"),picker.hide(),me.on("beforehide",me.doHideMonthPicker,me)),picker},onOkClick:function(picker,value){var month=value[0],year=value[1],date=new Date(year,month,this.getActive().getDate());date.getMonth()!==month&&(date=Ext.Date.getLastDateOfMonth(new Date(year,month,1))),this.setValue(date),this.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate),this.hideMonthPicker()},showPrevMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(e){var delta;e.stopEvent(),this.disabled||(0<(delta=e.getWheelDelta())?this.showPrevMonth():delta<0&&this.showNextMonth())},handleDateClick:function(e,t){var me=this,handler=me.handler;e.stopEvent(),me.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(me.disabledCellCls)||(me.setValue(new Date(t.dateValue)),me.fireEvent("select",me,me.value),handler&&handler.call(me.scope||me,me,me.value),me.onSelect())},onSelect:function(){this.hideOnSelect&&this.hide()},selectToday:function(){var me=this,btn=me.todayBtn,handler=me.handler;if(btn&&!btn.disabled){var date=new Date;me.hourField.setValue(date.getHours()),me.minuteField.setValue(date.getMinutes()),me.secondField.setValue(date.getSeconds()),me.setValue(date),me.fireEvent("select",me,me.value),handler&&handler.call(me.scope||me,me,me.value),me.onSelect()}return me},selectedUpdate:function(date){var c,cell,me=this,t=Ext.Date.clearTime(date,!0).getTime(),cells=me.cells,cls=me.selectedCls,cLen=cells.getCount();for(me.eventEl.dom.setAttribute("aria-busy","true"),(cell=me.activeCell)&&(Ext.fly(cell).removeCls(cls),cell.setAttribute("aria-selected",!1)),c=0;c<cLen;c++)if(cell=cells.item(c),me.textNodes[c].dateValue===t){me.activeCell=cell.dom,me.eventEl.dom.setAttribute("aria-activedescendant",cell.dom.id),cell.dom.setAttribute("aria-selected",!0),cell.addCls(cls),me.fireEvent("highlightitem",me,cell);break}me.eventEl.dom.removeAttribute("aria-busy")},fullUpdate:function(date){var prevStart,current,disableToday,tempDate,setCellClass,html,cls,formatValue,value,me=this,cells=me.cells.elements,textNodes=me.textNodes,disabledCls=me.disabledCellCls,eDate=Ext.Date,i=0,extraDays=0,newDate=+eDate.clearTime(date,!0),today=+eDate.clearTime(new Date),min=me.minDate?eDate.clearTime(me.minDate,!0):Number.NEGATIVE_INFINITY,max=me.maxDate?eDate.clearTime(me.maxDate,!0):Number.POSITIVE_INFINITY,ddMatch=me.disabledDatesRE,ddText=me.disabledDatesText,ddays=!!me.disabledDays&&me.disabledDays.join(""),ddaysText=me.disabledDaysText,format=me.format,days=eDate.getDaysInMonth(date),startingPos=eDate.getFirstDateOfMonth(date).getDay()-me.startDay,previousMonth=eDate.add(date,eDate.MONTH,-1),ariaTitleDateFormat=me.ariaTitleDateFormat;for(startingPos<0&&(startingPos+=7),days+=startingPos,prevStart=eDate.getDaysInMonth(previousMonth)-startingPos,current=new Date(previousMonth.getFullYear(),previousMonth.getMonth(),prevStart,me.initHour),me.showToday&&(disableToday=(tempDate=eDate.clearTime(new Date))<min||max<tempDate||ddMatch&&format&&ddMatch.test(eDate.dateFormat(tempDate,format))||ddays&&-1!==ddays.indexOf(tempDate.getDay()),me.todayDisabled=disableToday,me.disabled||me.todayBtn.setDisabled(disableToday)),setCellClass=function(cellIndex,cls){var cell=cells[cellIndex],describedBy=[];cell.hasAttribute("id")||cell.setAttribute("id",me.id+"-cell-"+cellIndex),value=+eDate.clearTime(current,!0),cell.firstChild.dateValue=value,cell.setAttribute("aria-label",eDate.format(current,ariaTitleDateFormat)),cell.removeAttribute("aria-describedby"),cell.removeAttribute("data-qtip"),value===today&&(cls+=" "+me.todayCls,describedBy.push(me.id+"-todayText")),value===newDate?(me.activeCell=cell,me.eventEl.dom.setAttribute("aria-activedescendant",cell.id),cell.setAttribute("aria-selected",!0),cls+=" "+me.selectedCls,me.fireEvent("highlightitem",me,cell)):cell.setAttribute("aria-selected",!1),value<min?(cls+=" "+disabledCls,describedBy.push(me.id+"-ariaMinText"),cell.setAttribute("data-qtip",me.minText)):max<value?(cls+=" "+disabledCls,describedBy.push(me.id+"-ariaMaxText"),cell.setAttribute("data-qtip",me.maxText)):ddays&&-1!==ddays.indexOf(current.getDay())?(cell.setAttribute("data-qtip",ddaysText),describedBy.push(me.id+"-ariaDisabledDaysText"),cls+=" "+disabledCls):ddMatch&&format&&(formatValue=eDate.dateFormat(current,format),ddMatch.test(formatValue)&&(cell.setAttribute("data-qtip",ddText.replace("%0",formatValue)),describedBy.push(me.id+"-ariaDisabledDatesText"),cls+=" "+disabledCls)),describedBy.length&&cell.setAttribute("aria-describedby",describedBy.join(" ")),cell.className=cls+" "+me.cellCls},me.eventEl.dom.setAttribute("aria-busy","true");i<me.numDays;++i)cls=i<startingPos?(html=++prevStart,me.prevCls):days<=i?(html=++extraDays,me.nextCls):(html=i-startingPos+1,me.activeCls),textNodes[i].innerHTML=html,current.setDate(current.getDate()+1),setCellClass(i,cls);me.eventEl.dom.removeAttribute("aria-busy"),me.monthBtn.setText(Ext.Date.format(date,me.monthYearFormat)),me.hourField.setValue(date.getHours()),me.minuteField.setValue(date.getMinutes()),me.secondField.setValue(date.getSeconds())},update:function(date,forceRefresh){var me=this,active=me.activeDate;return me.hourField.setValue(date.getHours()),me.minuteField.setValue(date.getMinutes()),me.secondField.setValue(date.getSeconds()),me.rendered&&(me.activeDate=date,!forceRefresh&&active&&me.el&&active.getMonth()===date.getMonth()&&active.getFullYear()===date.getFullYear()?me.selectedUpdate(date,active):me.fullUpdate(date,active)),me},beforeDestroy:function(){var me=this;me.rendered&&(Ext.destroy(me.keyNav,me.monthPicker,me.monthBtn,me.nextRepeater,me.prevRepeater,me.todayBtn,me.todayElSpan,me.hourField,me.minuteField,me.secondField,me.okBtn),delete me.textNodes,delete me.cells.elements),me.callParent()},privates:{finishRenderChildren:function(){var me=this;me.callParent(),me.monthBtn.finishRender(),me.hourField.finishRender(),me.minuteField.finishRender(),me.secondField.finishRender(),me.showToday&&(me.okBtn.finishRender(),me.todayBtn.finishRender())},getFocusEl:function(){return this.eventEl},syncDisabled:function(disabled,doButton){var me=this,keyNav=me.keyNav,todayBtn=me.todayBtn;keyNav&&(keyNav.setDisabled(disabled),me.prevRepeater.setDisabled(disabled),me.nextRepeater.setDisabled(disabled)),doButton&&todayBtn&&todayBtn.setDisabled(me.todayDisabled||disabled)}}}),Ext.define("Ext.locale.zh_CN.picker.DateTime",{override:"BaseApp.picker.DateTime",todayText:"现在",minText:"日期必须大于最小允许日期",maxText:"日期必须小于最大允许日期",disabledDaysText:"",disabledDatesText:"",nextText:"下个月 (Ctrl+Right)",prevText:"上个月 (Ctrl+Left)",monthYearText:"选择一个月 (Control+Up/Down 来改变年份)",todayTip:"{0}",format:"y年m月d日",ariaTitle:"{0}",ariaTitleDateFormat:"Y年m月d日",longDayFormat:"Y年m月d日",monthYearFormat:"Y年m月",getDayInitial:function(value){return value.substr(value.length-1)}}),Ext.define("BaseApp.datetime.DateTime",{extend:"Ext.form.field.Date",alias:"widget.datetimefield",requires:["BaseApp.picker.DateTime"],createPicker:function(){var me=this,format=Ext.String.format;return new BaseApp.picker.DateTime({pickerField:me,floating:!0,preventRefocus:!0,hidden:!0,minDate:me.minValue,maxDate:me.maxValue,disabledDatesRE:me.disabledDatesRE,disabledDatesText:me.disabledDatesText,ariaDisabledDatesText:me.ariaDisabledDatesText,disabledDays:me.disabledDays,disabledDaysText:me.disabledDaysText,ariaDisabledDaysText:me.ariaDisabledDaysText,format:me.format,showToday:me.showToday,startDay:me.startDay,minText:format(me.minText,me.formatDate(me.minValue)),ariaMinText:format(me.ariaMinText,me.formatDate(me.minValue,me.ariaFormat)),maxText:format(me.maxText,me.formatDate(me.maxValue)),ariaMaxText:format(me.ariaMaxText,me.formatDate(me.maxValue,me.ariaFormat)),listeners:{select:me.onSelect,scope:me},keyNavConfig:{esc:function(){me.inputEl.focus(),me.collapse()}}})},onExpand:function(){var value=this.rawDate;this.picker.setValue(Ext.isDate(value)?value:new Date,!0)}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseApp.ux.ChooseField",{alias:"widget.choosefield",extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},layout:"column",containerCfg:{html:'<span style="color:#999999">当前没有选择任何东西</span>'},buttonCfg:{text:"点击选择"},initComponent:function(){var me=this;this.buildField(),me.callParent(),me.containerField=me.down("container"),me.buttonField=me.down("button")},buildField:function(){var me=this;me.items=[Ext.apply({xtype:"container",padding:"8 0 0 0",margin:"0 15 0 0"},me.containerCfg),Ext.apply({xtype:"button",width:80,listeners:{click:function(){me.fireEvent("click",me)}}},me.buttonCfg)]},onResize:function(width,height){this.callParent(),this.containerField.setWidth(width-this.buttonField.getWidth()-this.labelWidth-20)},getSubmitData:function(){var data={};return data[this.name]=this.getValue(),data},setValue:function(value){Ext.isArray(value)?this.value=value:this.value=[value],this.value&&this.containerField.setHtml('<span style="color:#666666;font-weight: bold">'+this.value.join(" , ")+"</span>")},getValue:function(){return this.value}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseApp.ux.ImgField",{alias:"widget.imgfield",extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},layout:"fit",imgEls:[],fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}",'<div id="{id}-imgEl" style="width:100%;">','<div id="{id}-imgEl-add" style="background-color: #EEEEEE;cursor: pointer;float: left">','<img id="{id}-imgEl-add-img" src="" style="width:70%;height:70%;margin-left: 15%;margin-top: 15%"/>',"</div>","</div>","</div>"],initComponent:function(){this.imgHeight||(this.imgHeight=this.height),this.imgWidth||(this.imgWidth=this.height),this.callParent()},onRender:function(){this.callParent();var addBox=Ext.get(this.id+"-imgEl-add"),addImg=Ext.get(this.id+"-imgEl-add-img");this.addSrc?addImg.set({src:this.addSrc}):addBox.setStyle("display","none"),addBox.on("click",this.onAddImageClick,this)},onResize:function(width,height,oldWidth,oldHeight){var ckel;this.callParent(),(ckel=Ext.get(this.id+"-imgEl")).setHeight(height),(ckel=Ext.get(this.id+"-imgEl-add")).setWidth(this.imgWidth||height),ckel.setHeight(this.imgHeight||height)},onAddImageClick:function(){this.fireEvent("addimage",this)},_addImageBox:function(src){var me=this,width=this.imgWidth||height,height=this.imgHeight||height,ckel=Ext.get(this.id+"-imgEl-add"),img=document.createElement("div");img.style.position="relative",img.style.float="left",img.style.backgroundColor="#EEEEEE",img.style.width=width+"px",img.style.height=height+"px",img.style.display="table",img.style.textAlign="center",img.style.verticalAlign="middle",img.style.border="1px solid #E0E0E0",img.style.marginRight="20px",img.style.marginBottom="10px",(span=document.createElement("div")).style.display="table-cell",span.style.verticalAlign="middle",img.appendChild(span);var imgEl=document.createElement("img");if(this.keepUrl?imgEl.src=src:imgEl.src=Resource.image(src),imgEl.style.maxWidth=width-2+"px",imgEl.style.maxHeight=height-2+"px",span.appendChild(imgEl),this.deleted){var span,delDiv=document.createElement("div");delDiv.className="myapp-del-div",delDiv.style.position="absolute",delDiv.style.width="100%",delDiv.style.height="30%",delDiv.style.backgroundColor="rgba(0,0,0,0.35)",delDiv.style.top="0px",delDiv.style.display="none",delDiv.style.cursor="pointer",delDiv.style.textAlign="center",delDiv.style.color="#f0f0f0",delDiv.style.lineHeight="150%",delDiv.style.fontSize="15px",img.appendChild(delDiv),(span=document.createElement("span")).className="fa fa-trash-o",delDiv.appendChild(span),Ext.get(img).on("mouseover",function(){this.selectNode(".myapp-del-div").style.display=null}),Ext.get(img).on("mouseleave",function(){this.selectNode(".myapp-del-div").style.display="none"}),Ext.get(delDiv).on("click",function(){var data=this.parent(null,!0)._data;this.parent(null,!1).destroy(),me.fireEvent("deleteclick",me,data)})}Ext.get(img).insertBefore(ckel),img._data=src,img._imgEl=imgEl,this.imgEls.push({src:src,el:img}),Ext.get(img).on("click",function(){me.fireEvent("itemclick",me,this.dom._data)}),this._firstImageElement=img},getSubmitData:function(){var data={};return data[this.name]=this.getValue(),data},setValue:function(value){if(this.single)Ext.isArray(value)&&(value=value[0]),this.value=value,this._firstImageElement&&this._firstImageElement._imgEl?this.keepUrl?this._firstImageElement._imgEl.src=value:this._firstImageElement._imgEl.src=Resource.image(value):this._addImageBox(value),Ext.get(this.id+"-imgEl-add-img").set({src:this.replaceSrc});else if(Ext.isArray(value)){this.value=value;for(var i=0;i<value.length;i++)this._addImageBox(value[i])}else this.value=[value],this._addImageBox(value)},hideAddButton:function(){Ext.get(this.id+"-imgEl-add").setStyle("display","none")},showAddButton:function(){Ext.get(this.id+"-imgEl-add").setStyle({display:""})},addValue:function(v){this.value||(this.value=[]),this.value.push(v),this._addImageBox(v)},getValue:function(){return this.value},removeValue:function(v){if(this.value){for(;0<=this.value.indexOf(v);)this.value.splice(this.value.indexOf(v),1);if(this.imgEls){for(var rl=[],i=0;i<this.imgEls.length;i++)this.imgEls[i].src==v&&rl.push(this.imgEls[i]);for(i=0;i<rl.length;i++)this.imgEls.splice(this.imgEls.indexOf(rl[i],1)),Ext.get(rl[i].el).destroy()}}}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseApp.ux.HtmlPanel",{alias:"widget.htmlpanel",extend:"Ext.container.Container",mixins:{field:"Ext.form.field.Field"},layout:"fit",onRender:function(){this.callParent(),this._loadHtml(this.src)},_loadHtml:function(src){var me=this;src&&(me.mask(me.waitText||"正在加载页面..."),Ext.Ajax.request({url:src,success:function(response,opts){me.unmask(),me.htmlText=response.responseText,me.setHtml(me.htmlText)},failure:function(response,opts){Ext.Msg.alert("加载页面出错","加载页面失败,响应码:"+response.status,Ext.emptyFn)}}))},getQuery:function(){function Batch(arrays){this.css=function(key,value){if(arrays)for(var i=0;i<arrays.length;i++){var item=arrays[i];item&&item.style&&(item.style[key]=value)}},this.attr=function(key,value){if(arrays)for(var i=0;i<arrays.length;i++){var item=arrays[i];item&&(item[key]=value)}},this.getElements=function(){return arrays},this.getElement=function(){return arrays?arrays[0]:null},this.addListener=function(eventName,func,scope){if(arrays)for(var i=0;i<arrays.length;i++){Ext.get(arrays[i]).on(eventName,func,scope)}},this.forEach=function(callback){if(arrays)for(var i=0;i<arrays.length;i++)callback&&callback(arrays[i],i)}}return new function(me){var el=me.getEl();this.find=function(selector){return new Batch(el.query(selector,!0))}}(this)},setSrc:function(src){this._loadHtml(src)},getSubmitData:function(){var data={};return data[this.name]=this.getValue(),data},setValue:function(value){this.fireEvent("setvalue",void 0,value)},getValue:function(){var obj=new Object;return obj.set=function(value){this._value=value},this.fireEvent("getvalue",void 0,obj),obj._value}})}),ApplicationLoaderViews.push(function(){Ext.define("UXApp.field.GridComboBox",{extend:"Ext.form.field.ComboBox",alias:"widget.gridcombobox",multiSelect:!1,displayField:"text",valueField:"text",store:{data:[]},defaultListenerScope:!0,listeners:{change:"onSelfChange",focus:"onSelfFocus",specialkey:"onSelfKeyUp"},onUnbindStore:function(){var me=this,picker=me.picker;me.queryFilter&&!me.store.destroyed&&me.clearLocalFilter(),picker&&picker.unbindStore&&picker.unbindStore(),me.pickerSelectionModel.destroy()},onSelfChange:function(self,newValue,oldValue){if(this._current_item_click)this._current_item_click=!1;else if(this.gridStore&&this.searchQuery){var ext={};this.gridStore.proxy&&(ext=this.gridStore.proxy.extraParams),ext[this.searchQueryField]=newValue,this.gridStore.load(ext),this.expand(),this.focus()}},onSelfFocus:function(){this._current_item_click?this._current_item_click=!1:!this.isExpanded&&this.searchQuery&&this.gridStore&&(this.expand(),this.focus())},onSelfKeyUp:function(field,e){if(e.getKey()==Ext.EventObject.BACKSPACE&&this.searchQuery){var self=this;new Ext.util.DelayedTask(function(){self.onSelfFocus()}).delay(100)}},setGridStore:function(store){store&&(this.gridStore=store)},setPaging:function(is){this.showPagingView=is},setComboBoxStoreData:function(data,defaultSelect){var store=this.getStore();store.removeAll(),store.add(data),this.valueField&&defaultSelect&&this.setValue(data[this.valueField])},createPicker:function(){var me=this;if(this.gridStore){var store=this.gridStore,treeConfig={store:store,selModel:{mode:me.multiSelect?"SIMPLE":"SINGLE"},floating:!0,refresh:function(){me.onListRefresh(arguments)},bindStore:function(){try{this.callParent(arguments)}catch(e){}}};if(this.showPagingView&&(treeConfig.dockedItems=[{xtype:"pagingtoolbar",store:store,dock:"bottom",width:360,displayInfo:!0}]),this.treePanelConfig)for(var i in this.treePanelConfig)treeConfig[i]=this.treePanelConfig[i];var picker=Ext.create("Ext.grid.Panel",treeConfig);return me.mon(picker,{itemclick:me.onItemClick,scope:me}),picker}return null},onItemClick:function(dataview,record,item,index,e,eOpts){var data=record.getData();this.gridDisplayField&&(data[this.displayField]=this.gridDisplayField(data));var store=this.getStore();store.removeAll(),store.add(data),this._current_item_click=!0,this.setValue(record.getData()[this.valueField]),this.fireEvent("gridChange",this,data)},onListRefresh:function(){}})}),ApplicationLoaderViews.push(function(){Ext.define("UXApp.ux.TreeGridComboBox",{extend:"Ext.form.field.ComboBox",alias:"widget.treegridcombobox",multiSelect:!1,displayField:"text",valueField:"text",store:{data:[]},onUnbindStore:function(){var me=this,picker=me.picker;me.queryFilter&&!me.store.destroyed&&me.clearLocalFilter(),picker&&picker.unbindStore&&picker.unbindStore(),me.pickerSelectionModel.destroy()},setTreeGridStore:function(store){store&&(this.treeGridStore=store)},setComboBoxStoreData:function(data){var store=this.getStore();store.removeAll(),store.add(data)},createPicker:function(){var me=this;if(this.treeGridStore){var treeConfig={store:this.treeGridStore,useArrows:!0,selModel:{mode:me.multiSelect?"SIMPLE":"SINGLE"},height:200,floating:!0,refresh:function(){me.onListRefresh(arguments)}};if(this.treePanelConfig)for(var i in this.treePanelConfig)treeConfig[i]=this.treePanelConfig[i];var picker=Ext.create("Ext.tree.Panel",treeConfig);return me.mon(picker,{itemclick:me.onItemClick,scope:me}),this.picker=picker}return null},onItemClick:function(dataview,record,item,index,e,eOpts){var data=record.getData(),store=this.getStore();store.removeAll(),store.add(data),this.setValue(record.getData()[this.valueField]),this.fireEvent("itemsclick",this,data)},onListRefresh:function(){}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseAppContextPanel",{extend:"Ext.panel.Panel",layout:{type:"fit"},config:{closeCallback:null},defaultListenerScope:!0,listeners:{beforeclose:"onSelfBeforeClose",close:"onCloseClick",activate:"onActivate"},onSelfBeforeClose:function(panel,opts){var item=this.firstItem;item&&item.onBeforeCloseApply&&item.onBeforeCloseApply();var fromItem=this.fromItemView;return fromItem&&fromItem.onSubTabCloseApply&&fromItem.onSubTabCloseApply(),!0},forward:function(component,opts){var views=this.items.items,panel=null;if((opts=opts||{}).parent=this,opts.topView=this.parent,opts.tabView=this.parent,"string"==typeof component)panel=Ext.create(component,opts);else{if(!(component instanceof Ext.Component))return console.error("first param only accept string or component."),!1;panel=component}panel.parent=this,panel.topView=this.parent,panel.class=component;for(var i=0;i<views.length;i++){views[i].hide()}return this.add(panel),panel.show(),panel.onAfterApply&&panel.onAfterApply(this.moduleObject),panel},back:function(component){var views=this.items.items,toIndex=0;if(1<views.length){if(component){if(0<=(toIndex=views.indexOf(component)))for(var removed=views.splice(toIndex-1,views.length),i=0;i<removed.length;i++)this.remove(removed[i])}else{var last=views[views.length-1];this.remove(last)}if(0<this.items.items.length){if(last=this.items.items[this.items.items.length-1]){for(i=0;i<views.length;i++){views[i].hide()}last.show()}last.onBackApply&&last.onBackApply()}return last}console.log("nothing to back!")},redraw:function(obj){var views=this.items.items,component=obj;if(null==component)for(var i=0;i<views.length;i++){var v=views[i];v.isVisible()&&(component=v)}if(component){var cs=component.class,panel=Ext.create(cs,{parent:this,topView:this.parent,tabView:this.parent});panel.class=cs,this.remove(component),this.add(panel),panel.show();try{panel.onAfterApply&&panel.onAfterApply(this.moduleObject),panel.onAddTab&&panel.onAddTab(this.moduleObject)}catch(e){console.error(e)}}return panel},onCloseClick:function(){var item=this.firstItem;return item&&item.onCloseApply&&item.onCloseApply(),!0},onActivate:function(){var item=this.firstItem;item&&item.onActiveApply&&item.onActiveApply()}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseAppTablePanel",{extend:"Ext.tab.Panel",requires:["BaseAppContextPanel"],tabs:{},constructor:function(){this.getModuleName=function(module){return module instanceof Ext.data.Model?module.get("module"):module instanceof Object?module.module:module},this.getModuleIcon=function(module){return module instanceof Ext.data.Model?module.get("tabIcon"):module instanceof Object?module.tabIcon:null},this.getModuleText=function(module){return module instanceof Ext.data.Model?module.get("text"):module instanceof Object?module.text:null},this.callParent(arguments)},initComponent:function(){this.callParent(arguments)},getTabs:function(){return this.items.items},addTab:function(module,isActiveTab){if(!(module instanceof Ext.data.Model)){var record=new Ext.data.Model;if(Ext.isObject(module))for(var i in module)record.set(i,module[i]);else{if(!Ext.isString(module))return Ext.MessageBox.alert("提示","新的标签页传入的参数错误！"),!1;record.set("module",module)}module=record}var pkg=this.getModuleName(module),title=this.getModuleText(module),icon=this.getModuleIcon(module),unique=pkg+"&"+(module.get("id")||""),isNew=!!module.get("isNew"),isSkipCallAfter=!module.get("isSkipCallAfter");if(module.get("isSplitName")&&(title=module.get("firstName")+" - "+module.get("lastName")),console.log("create tab items : ",module,isActiveTab),null==pkg)return console&&console.log("addTab module view is empty."),!1;if(!isNew){var cxp=this.tabs[unique];if(cxp&&this.items.contains(cxp)){if(0!=isActiveTab){this.setActiveTab(cxp);try{cxp.firstItem&&cxp.firstItem.onAfterApply&&(cxp.firstItem.onAfterApply(module),cxp.firstItem.getStore&&cxp.firstItem.getStore()&&(cxp.firstItem.getStore().reloadMember?cxp.firstItem.getStore().reloadMember():cxp.firstItem.getStore().load()))}catch(e){console.log(e)}}return!0}}var config={};try{config=module.get("config")||{}}catch(e){}var tab=Ext.create(pkg,config),contextpanel=Ext.create("BaseAppContextPanel",{parent:this,topView:this,tabView:this,rootView:this.rootView,border:!1,title:title,icon:icon,moduleObject:module});tab.class=pkg,tab.parent=contextpanel,tab.topView=this,contextpanel.add(this._checkTabType(tab)),contextpanel.firstItem=tab,this.add(contextpanel),isActiveTab&&this.setActiveTab(contextpanel);try{isSkipCallAfter&&(tab.onAfterApply&&tab.onAfterApply(module),tab.onAddTab&&tab.onAddTab(module))}catch(e){console.error(e)}return isNew||(this.tabs[unique]=contextpanel),contextpanel},_checkTabType:function(tab){if(tab&&tab.search){var cmps=[];tab.getSearchFormItems&&(cmps=tab.getSearchFormItems()),cmps.push({xtype:"toolbar",margin:"30px auto auto auto",style:{backgroundColor:"#F9F9F9"},items:["->",{xtype:"button",width:100,margin:"auto 16px auto auto",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/ElEQVR42qXTvw7BUBQG8JuYLB1IsFl5EwMP0FE8QBklRomko5XB4g0sFTERnqS7/+P1HfmanF5VEsNP6/Tcz7lXaqy15h+vjzAMXR3YwoXkvq178gLGYOEOa9jBg7Xxt4A2G/dQb003Rsg9a5bTfQyQUW9Qw8IenKgnNbiy52PAGSL+slwPFHGSNXt+CghgSIEKuHzbgoxZxQIPmuShVtFbSELcgA4PapdxiEc+m+UF6L9RDjOiG2uJfirA9/0UPGxAF0YkY8/dEB0wgTjDRIWKgQqIdUABFs7iBes6IAmJoeRuoQgrLl7xu8kIMG+HqBrLsOQ1dS65b+M/nhlmMPcptQ1sAAAAAElFTkSuQmCC",text:"搜索",listeners:{click:"onSearchClick"}},{xtype:"button",width:100,margin:"auto auto auto 16px",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABT0lEQVR42mP4//8/AyUYq2BkZCQyZgPiCWhiYEyMAYJAfACIP5BrwCYg/o+GfwPxLiCWJ8YAISwuYAfiOiDeBzdgba3L/w0NbmC8vt7155pa57MrKhz08IQBHxB/hxuwpy/g/5FpYWB8eGronz29/g82NLg2LS+zE8DidzaoC/bDDTg0JeT/2QWxYHx6Xsz/o9PDPm9s9T2Gxf+wMNiNEgYHJgX9Pz03CoxPzYn8f3xm+L/9EwI/bm31uLC21nnNqiqHWSsr7CeuKLdvXFZqW4QRC/v7/f8fmx76n1Ci2dTo+nxdrdMDjIS0p8fn/75+P4IG7Ojw/L+tzeMfhgG7Oj3/gzAhA3Z2ePwHYQwDdrS5/gdhgi7Aog5MbGt2+r+z1eX/qjKr/4vyTbFikBxIDUgthgFbGu3/7+lw/r+92eE/iI0Ng+RAakBsgrmRFAwAq8ZsZfQIyvcAAAAASUVORK5CYII=",text:"重置",listeners:{click:"setSearchResize"}},"->"]});var west=Ext.create("Ext.panel.Panel",{xtype:"panel",name:"$_search_panel",border:!1,width:300,region:"east",layout:"border",header:!1,placeholder:{xtype:"panel",border:!1,header:!1,hidden:!0},collapsed:!0,collapsible:!0,split:!1,style:{boxShadow:"-3px 0px 5px #D0D0D0;"},items:[{xtype:"panel",region:"north",border:!1,height:50,layout:"border",header:!1,items:[{xtype:"button",flex:1,region:"center",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0ElEQVQ4T6XTPUpDURDF8V8KN2AVSwsLRZIdpLIKIsYoJEXAPlWKFFlIsLCx1A2ZJYQgCKmUoCA3vAePx/uK95bDzJ97zpxpiXytyHlZwDGOsKmBnmOV9mQBbbxhhHUJ5BZDTIoAoXaKF9zjIwfp4xFj/JYBQv0Mz7jDZ9LYwwwP+MmCy0wMOpe4wSUWyfAuL61qCx084QvX+C7ypQ4QpGyTnxwESCUM0MU8cb+RhCITrzBtYmLUGk/w2iBIIUwhD/v3nyhf4L0qSAfdV/Q1/gGzhCYRAUegyQAAAABJRU5ErkJggg==",cls:"search-close",style:{backgroundColor:"#F0F0F0"},listeners:{click:"setSearchClose"}},{xtype:"component",flex:1,region:"west",html:'<div style="width: 100%;height: 100%;background-color: #F0F0F0;text-align: center;line-height: 50px;color: #333333;border:1px solid #EAEAEA;font-size: 16px"><span>筛选</span></div>'}]},{xtype:"form",name:"$_search_panel_form",region:"center",border:!1,scrollable:"y",bodyPadding:"30px 10px 10px 10px",header:!1,style:{borderWidth:"0px 1px 1px 1px;",borderStyle:"solid;border-color: #EAEAEA;"},bodyStyle:{backgroundColor:"#F9F9F9"},items:cmps}],listeners:{float:function(){}}});Ext.override(west,{canFocus:function(skipVisibility,includeFocusTarget){return this.collapsed?!!(this.placeholder&&this.placeholder.canFocus&&this.placeholder.canFocus(skipVisibility,includeFocusTarget)):this.mixins.focusable.canFocus.call(this,skipVisibility,includeFocusTarget)},onFloatedPointerEvent:function(event){var me=this;(me.owns(event)||me.placeholder.owns(event)||me.splitter&&me.splitter.owns(event)||me.floatCollapsedPanel&&me.el.getRegion().contains(event.getPoint()))&&me.slideOutTask.cancel()},onMouseLeaveFloated:function(e){var toElement=e.getRelatedTarget();!toElement||!this.owns(toElement)&&this.placeholder.owns(toElement)}});var panel=Ext.create("Ext.panel.Panel",{layout:"border",border:!1,header:!1,defaultListenerScope:!0,childRootPanel:tab,items:[west,{xtype:"panel",region:"center",layout:"fit",items:[tab]}],setSearchShow:function(){this.find("$_search_panel").floatCollapsedPanel()},setSearchClose:function(){this.find("$_search_panel").floatCollapsedPanel()},setSearchFixShow:function(){this.find("$_search_panel").setCollapsed(!0)},setSearchFixClose:function(){this.find("$_search_panel").setCollapsed(!1)},setSearchResize:function(){this.find("$_search_panel_form").reset()},findForm:function(name){return this.find("$_search_panel_form").find(name)},onSearchClick:function(){var searchPanel=this.find("$_search_panel_form");this.childRootPanel.onSearchFormButtonClick&&this.childRootPanel.onSearchFormButtonClick(searchPanel)}});return tab.searchPanel=panel,tab&&panel&&panel.childRootPanel&&panel.childRootPanel.onInitSearchPanel&&panel.childRootPanel.onInitSearchPanel(panel),panel}return tab},closeTab:function(module){var cxtp;if(Ext.isString(module)){var unique=this.getModuleName(module)+"&"+(module.get("id")||"");cxtp=this.tabs[unique]}else cxtp=module;this.remove(cxtp)},activeTabByModule:function(module){var unique=this.getModuleName(module)+"&"+(module.get("id")||""),contextpanel=this.tabs[unique];this.setActiveTab(contextpanel)}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseAppSystemMessage",{extend:"Ext.tip.ToolTip",defaultListenerScope:!0,title:"站内消息通知",defaultAlign:"t-b",cls:"system-message",width:300,anchor:!0,autoHide:!1,closable:!0,showDelay:0,dismissDelay:0,html:'<div class="system-message-box"><div class="system-message-item none-text"><span>您没有消息!</span></div></div>',onRender:function(){this.callParent(arguments),this._initRenderMessage()},_initRenderMessage:function(){var self=this,el=this.getEl();if(el){this.getEl().on("mouseleave",function(){self.close()}),this.getEl().on("mouseenter",function(){self.timeOutHander&&(clearTimeout(self.timeOutHander),console.log("clear timeout ",self.timeOutHander))});try{for(var titles=el.query(".sm-title",!1),i=0;i<titles.length;i++){titles[i].on("click",this.onMessageItemClick,this)}var more=this.getEl().selectNode(".more-text span",!1);more&&more.on("click",this.onMessageMoreClick,this)}catch(e){console.error(e)}}},setValues:function(datas){if(datas&&0<datas.length){var html=[];for(var i in html.push('<div class="system-message-box">'),datas)html.push('<div class="system-message-item sm-hover">'),html.push('<div class="sm-title" data-id="'+(datas[i].id||"")+'">'+datas[i].title+"</div>"),html.push('<div class="sm-content">'+datas[i].content+"</div>"),html.push("</div>");html.push('<div class="system-message-item more-text"><span style="padding: 5px;cursor: pointer">查看所有消息</span></div>'),html.push("</div>"),this.setHtml(html.join("")),this._initRenderMessage()}else this.setHtml('<div class="system-message-box"><div class="system-message-item none-text"><span>您没有消息!</span></div></div>')},onMessageItemClick:function(view,el){var id=el.getAttribute("data-id");ApplicationLoader.fireListener("messageItemClick",this,{id:id}),this.close()},onMessageMoreClick:function(){ApplicationLoader.fireListener("messageMoreClick",this,{id:id}),this.close()}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseAppToolbarMenuView",{extend:"Ext.panel.Panel",alias:"widget.toolbarmenu",height:52,width:533,header:!1,defaultListenerScope:!0,layout:"border",apis:Global.API_INIT_LIST,items:[{xtype:"panel",region:"west",width:380,bodyStyle:"background-color:#2a3f5d;border-bottom:1px solid #121b28",items:[{xtype:"image",name:"____my_cmp",height:"52px",margin:"0px",src:ApplicationLoader.getSystemLogo()}]},{xtype:"panel",region:"center",bodyStyle:"background-color:#2a3f5d;border-bottom:1px solid #121b28",items:[{xtype:"container",height:52,name:"tools"}]}],listeners:{afterrender:"onPanelAfterRender"},onPanelAfterRender:function(component,eOpts){this.onToolbarRenderTools(),this.setTopLabel(),this.setUserLogo(),this.addListeners(),this.setTimerEvent()},onToolbarRenderTools:function(){var self=this,tools=this.find("tools"),html=[];html.push('<div style="height: 52px;overflow: hidden;color: #ffffff">'),html.push('<div style="height: 52px;overflow:hidden;float: right;padding: 8px 38px 0px 10px">'),html.push('<img class="main-toolbar-head" style="width: 35px;height: 35px;border-radius: 35px;cursor: pointer" src="'+Global.CNF_RES_HEAD_LOGO+'"/>'),html.push("</div>"),html.push('<div style="height: 52px;overflow:hidden;float: right;padding: 0px 5px 0px 0px;line-height: 52px;">'),html.push('<span class="main-toolbar-loginname">'+Language("用户未登录")+"< /span>"),html.push("</div>"),html.push('<div class="myapp-toolbar-item main-toolbar-btn-item main-toolbar-btn-item-out" style="width:40px;height: 52px;overflow:hidden;float: right;text-align: center;margin-right: 15px">'),html.push('<i style="font-size: 22px; color: white;cursor: pointer;line-height: 54px" class="fa fa-power-off"></i>'),html.push("</div>"),html.push('<div class="myapp-toolbar-item main-toolbar-btn-item main-toolbar-btn-item-cog" style="width:40px;height: 52px;overflow:hidden;float: right;text-align: center;display: none">'),html.push('<i style="font-size: 22px; color: white;cursor: pointer;line-height: 54px" class="fa fa-cog"></i>'),html.push("</div>"),html.push('<div class="myapp-toolbar-item main-toolbar-btn-item main-toolbar-btn-item-key" style="width:40px;height: 52px;overflow:hidden;float: right;text-align: center;display: none">'),html.push('<i style="font-size: 20px; color: white;cursor: pointer;line-height: 52px" class="fa fa-key"></i>'),html.push("</div>"),html.push('<div class="myapp-toolbar-item main-toolbar-btn-item main-toolbar-btn-item-message" style="width:40px;height: 52px;overflow:hidden;float: right;text-align: center;display: none">'),html.push('<i style="font-size: 20px; color: white;cursor: pointer;line-height: 52px" class="fa fa-envelope-o"></i>'),html.push('<span class="pop-number" style="display: none">0</span>'),html.push("</div>");var extendTools=ApplicationLoader.getDefineTools();if(extendTools&&0<extendTools.length)for(var i=0;i<extendTools.length;i++){(toolName=(tool=extendTools[i]).name)&&tool.code&&(html.push('<div class="myapp-toolbar-item main-toolbar-btn-item main-toolbar-btn-item-'+toolName+'" style="width:40px;height: 52px;overflow:hidden;float: right;text-align: center">'),html.push(tool.code),html.push("</div>"))}(html.push("</div>"),tools.setHtml(html.join("")),ApplicationLoader.getSelfObject()._global_tools_hide_setting)||this.getElement(".main-toolbar-btn-item-cog").show();ApplicationLoader.getSelfObject()._global_tools_hide_editpwd||this.getElement(".main-toolbar-btn-item-key").show();ApplicationLoader.getSelfObject()._global_tools_hide_message||this.getElement(".main-toolbar-btn-item-message").show();this.getElement(".main-toolbar-btn-item-message").on("mouseleave",function(){var timeOutHander=setTimeout(function(){self.tooltip.close()},300);self.tooltip.timeOutHander=timeOutHander});var hli=this.find("____my_cmp");if(hli&&hli.getEl().on("click",function(){window.open(decodeURIComponent(Base64.decode("aHR0cCUzQS8vd3d3LmppYW56aXhpbmcuY29tLmNu")))}),extendTools&&0<extendTools.length)for(i=0;i<extendTools.length;i++){var tool,toolName=(tool=extendTools[i]).name,rendered=tool.rendered;if(rendered)rendered(this,this.getElement(".main-toolbar-btn-item-"+toolName),i)}},setTimerEvent:function(){var self=this;this._refreshViewFun=function(){self.apis.Admin.getTimerTaskData.call({},function(response){if(response){var message=response.message;if(message)try{var notReads=message.notReads,notShow=message.notShow;if(notReads)try{var count=notReads.count,data=notReads.objects,values=[];for(var i in data){var id=data[i].id,title=data[i].title,time=data[i].createTime;values.push({id:id,title:title,content:new Date(time).format()})}self.setMessageCount(count),self.tooltip.setValues(values)}catch(e){console.error(e)}if(notShow){var html=self.getMessageHtml(notShow),toast=Ext.toast({html:html,border:!1,bodyBorder:!1,closable:!0,title:Language("您有一个新的消息"),align:"t"}),el=(self.messageToastWindow=toast).getEl();if(el){var dom=el.selectNode(".toast-title",!1);dom&&dom.on("click",self.onShowMessageClick,self)}}}catch(e){console.error(e)}self._updateTimerTaskData&&self._updateTimerTaskData(response)}},function(){return!0})},setInterval(this._refreshViewFun,1e4),this._refreshViewFun()},onTopExistClick:function(){var me=this;Dialog.confirm(Language("退出登录提示"),Language("确定退出当前登录用户吗？"),function(btn){"yes"==btn&&me.existCurrentSession()})},existCurrentSession:function(){Ext.Ajax.request({url:"/admin/Admin/loginOut.action",method:"POST",success:function(response,opts){if(!response.responseText||"ok"!=response.responseText)return Dialog.alert(Language("提示"),Language("操作失败"),Dialog.ERROR),!1;window.location.reload()},failure:function(response,opts){200!=response.status&&Dialog.alert(Language("提示"),Language("网络错误！错误码:")+response.status,Dialog.ERROR)}})},addListeners:function(){var me=this,existElement=this.getElement(".main-toolbar-btn-item-out"),settingElement=this.getElement(".main-toolbar-btn-item-cog"),editpwdElement=this.getElement(".main-toolbar-btn-item-key"),messageElement=this.getElement(".main-toolbar-btn-item-message"),headElement=this.getElement(".main-toolbar-head");existElement.on("click",function(){me.onTopExistClick()}),editpwdElement.on("click",function(){ApplicationLoader.fireListener("editPasswordClick",me)}),settingElement.on("click",function(){ApplicationLoader.fireListener("settingClick",me)}),headElement.on("click",function(){ApplicationLoader.fireListener("headLogoClick",me)}),messageElement.on("click",function(){me.openMessageTab()}),this.tooltip=new Ext.create("BaseAppSystemMessage",{target:messageElement.dom,toolbarMenuView:this})},setMessageCount:function(count){this.getElement(".fa-envelope-o");var popNumber=this.getElement(".pop-number");0<count?(popNumber.show(),popNumber.setHtml(count)):popNumber.hide()},getMessageHtml:function(data){var title=data.title,content=data.clearContent,TableAdmin=data.TableAdmin,html=[];return html.push('<div style="min-width: 200px;max-width: 300px;min-height: 60px">'),html.push('<div style="float: left;width: 50px;padding: 5px 15px 0px 0px">'),html.push('<img style="width: 35px;height: 35px;border-radius: 35px" src="'+this.getAdminHeaderLogo(TableAdmin.logo)+'">'),html.push("</div>"),html.push('<div style="width: auto;float: left;overflow: hidden">'),html.push('<div class="toast-title" data-id="'+data.id+'" style="text-overflow:ellipsis; white-space: nowrap;margin: 2px 0px;color: #0f74a8;cursor: pointer;font-size: 13px">'),html.push(title),html.push("</div>"),html.push('<div style="text-overflow:ellipsis; white-space: nowrap;margin: 3px 0px;font-size: 12px">'),html.push('<span style="color: #999999">'+Language("发送人")+"："+(TableAdmin.realName||TableAdmin.userName)+"</span>"),html.push("</div>"),html.push('<div style="margin: 2px 0px;max-width: 250px;height: 35px;overflow: hidden;font-size: 13px">'),html.push("<span>"+content.substring(0,40)+"</span>"),html.push("</div>"),html.push("</div>"),html.push("</div>"),html.join("")},getAdminHeaderLogo:function(logo){return logo?Resource.image(logo):Global.CNF_RES_HEAD_LOGO},onShowMessageClick:function(self,el){var id=el.getAttribute("data-id");Dialog.openWindow("App.message.ShowMessageWindow",{toolbarMenuView:this.toolbarMenuView}).setValue(id),this.messageToastWindow.close()},setTopLabel:function(username){if(!username){var userJson=ApplicationLoader.getGlobalParams();if(userJson&&userJson.user&&userJson.user.userName){var realName=userJson.user.realName;username=realName||userJson.user.userName}else username=Language("您还未登录")}var el=this.getElement(".main-toolbar-loginname");el&&el.setHtml(Language("您好，")+username)},setUserLogo:function(){var userJson=ApplicationLoader.getGlobalParams();if(userJson&&userJson.user&&((logo=userJson.user.logo)&&""!=logo)){var logo=this.getAdminHeaderLogo(logo),el=this.getElement(".main-toolbar-head");el&&el.set({src:logo})}},getElement:function(query){var el=this.getEl();return el?el.selectNode(query,!1):null},openMessageTab:function(){var tabView=ApplicationLoader.getGlobalComponent("TAB_VIEW");tabView&&(ApplicationLoader.fireListener("messageClick",this,tabView),this.tooltip&&this.tooltip.close())}})}),ApplicationLoaderViews.push(function(){Ext.define("BaseAppContentView",{extend:"Ext.container.Viewport",border:!1,layout:{type:"border"},moduleButtonHeight:44,panelTitleHeight:36,apis:Global.API_INIT_LIST,initPrivateCompant:function(){Ext.define("BaseAppLayoutBorder",{extend:"Ext.panel.Panel",xtype:"layout-border",preventHeader:!1,requires:["Ext.layout.container.Border"],region:"center",layout:"border",bodyBorder:!1,defaults:{collapsible:!0,split:!0}})},getModules:function(){var me=this,modules=ApplicationLoader.getLoadModules();this.moduleButtons=[];for(var i=0,k=0;k<modules.length;k++){var moduleButton=Ext.create("BaseAppButton",{iconAlign:"left",listeners:{click:function(self,e,o){for(var b=0;b<me.moduleButtons.length;b++)me.moduleButtons[b].setUnSelected();self instanceof BaseAppButton&&self.setSelected(),Resource.hash("module",this.data.module);try{sessionStorage.setItem("$_console_module",this.data.module)}catch(e){}me.moduleListTree.setTitle("<strong>"+this.text+"</strong>");try{me.moduleListTree.mask("正在加载中...")}catch(e){}me.getModuleTreeStore(this.data.module,function(store){if("Ext.data.TreeStore"!=Ext.getClassName(store))Dialog.alert(Language("菜单必须是TreeStore对象"));else{me.moduleListTree.setStore(store);try{me.moduleListTree.unmask()}catch(e){}ApplicationLoader.setCurrentTreeModuleWrapper(new ApplicationTreeStoreWrapper(store)),ApplicationLoader.fireListener("loadedTreeModule")}})}},style:{padding:"10px 6px 10px 12px"},icon:Resource.create(modules[k].tabIcon),text:modules[k].text,data:modules[k]});this.moduleButtons[i]=moduleButton,i++,moduleButton.setVar("data",modules[k])}return this.moduleButtons},getModuleTreeStore:function(module,fn){ApplicationLoader.fireListener("loadTreeModule",this,this.apis,module,fn)},getModuleViewHeight:function(){var modules=ApplicationLoader.getLoadModules();return this.panelTitleHeight+(this.moduleButtonHeight-2)*Math.ceil(modules.length/3)},getWorkbench:function(){var me=this;return this.workbench=Ext.create("Ext.panel.Panel",{region:"north",name:"gzt",height:me.getModuleViewHeight(),border:!1,layout:{type:"table",columns:3},preventHeader:!1,title:"<strong>"+Language("工作台")+"</strong>",items:me.getModules(),tools:[{xtype:"tool",type:"help",listeners:{click:{fn:me.onToolClick,scope:me}}},{xtype:"tool",type:"prev",listeners:{click:{fn:me.onToolPrevClick,scope:me}}}]}),this.workbench},onToolPrevClick:function(b,e,o){this.find("main_west").collapse(Ext.Component.DIRECTION_LEFT)},getModuleList:function(){var me=this;return this.moduleListTree=Ext.create("Ext.tree.TreePanel",{region:"center",border:!1,useArrows:!0,rootVisible:!1,title:"<strong>&nbsp;&nbsp;</strong>",displayField:"text",listeners:{itemcontextmenu:function(view,rec,node,index,e,eOpts){e.preventDefault(),e.stopEvent(),new Ext.menu.Menu({floating:!0,items:[{text:Language("展开"),pressed:!0,handler:function(){var id=rec.get("id");me.moduleListTree.getRootNode().findChild("id",id).expand()}},{text:Language("折叠"),pressed:!0,handler:function(){var id=rec.get("id");me.moduleListTree.getRootNode().findChild("id",id).collapse()}},{text:Language("刷新"),pressed:!0,handler:function(){var store=me.moduleListTree.getStore();rec.removeAll(),store.load({node:rec,callback:function(){view.refresh()}})}}]}).showAt(e.getXY())}},viewConfig:{listeners:{itemclick:{fn:me.onTreeviewItemClick,scope:me}}}}),this.moduleListTree},getTabPanel:function(){return this.moduleTabPanel=Ext.create("BaseAppTablePanel",{activeTab:0,border:!1,defaults:{closable:!0},rootView:this,items:[{xtype:"panel",closable:!1,icon:Global.CNF_RES_HOME_TAB_ICON,title:"主页",border:!1,layout:"fit",items:[ApplicationLoader.getGlobalComponent("DASH_BOARD_VIEW")]}]}),ApplicationLoader.setGlobalComponent("TAB_VIEW",this.moduleTabPanel),this.moduleTabPanel},initComponent:function(){this.initPrivateCompant();var me=this,dashboardView=ApplicationLoader.getGlobalComponent("DASH_BOARD_VIEW");dashboardView||(dashboardView=Ext.create("App.BaseAppDashboardView"),ApplicationLoader.setGlobalComponent("DASH_BOARD_VIEW",dashboardView));var toolbarView=Ext.create("BaseAppToolbarMenuView",{_updateTimerTaskData:function(data){var dashboardView=ApplicationLoader.getGlobalComponent("DASH_BOARD_VIEW");if(dashboardView&&data&&dashboardView.updateTimerData)try{dashboardView.updateTimerData(data)}catch(e){}}});Ext.applyIf(me,{items:[{xtype:"panel",region:"north",height:52,border:!1,layout:"fit",items:[toolbarView],listeners:{resize:{fn:me.onHeadResize,scope:me},afterlayout:{fn:me.onAfterLayout,scope:me},afterrender:{fn:me.onAfterRender,scope:me}}},Ext.create("BaseAppLayoutBorder",{items:[{xtype:"panel",name:"main_west",region:"west",preventHeader:!1,collapsible:!1,split:!0,border:!1,width:215,layout:{type:"border"},items:[me.getWorkbench(),me.getModuleList()]},{xtype:"panel",region:"center",border:!1,collapsible:!1,preventHeader:!1,layout:"fit",items:[me.getTabPanel()]}]})]}),me.callParent(arguments),setInterval(function(){me.intervalCheckStorage()},500)},intervalCheckStorage:function(){for(var items=this.moduleTabPanel.getTabs(),active=this.moduleTabPanel.getActiveTab(),datas=[],i=0;i<items.length;i++)if(null!=items[i].moduleObject){var dt=items[i].moduleObject.getData();items[i]==active?dt.isActiveTab=!0:dt.isActiveTab=!1,datas.push(dt)}if(sessionStorage){var text=[];if(datas)for(var j=0;j<datas.length;j++){var nw={expanded:(dt=datas[j]).expanded,firstName:dt.firstName,lastName:dt.lastName,id:dt.id,icon:dt.icon,iconCls:dt.iconCls,isActiveTab:dt.isActiveTab,isFirst:dt.isFirst,isLast:dt.isLast,isSplitName:dt.isSplitName,leaf:dt.leaf,module:dt.module,originalId:dt.originalId,parentId:dt.parentId,pid:dt.pid,root:dt.root,text:dt.text,top:dt.top,type:dt.type,visible:dt.visible,tabIcon:dt.tabIcon};if(dt.config){var apis=dt.config.apis,newApis={};if(apis)for(var k in apis)if(apis[k])for(var k2 in newApis[k]={},apis[k]){var k2Obj={};if(apis[k][k2]&&apis[k][k2]._isInstance){k2Obj.method=apis[k][k2].method,k2Obj.module=apis[k][k2].module,k2Obj.page=apis[k][k2].page,k2Obj._isInstance=apis[k][k2]._isInstance,k2Obj._url=apis[k][k2]._url;var objParams=apis[k][k2].params,newObjParams={};if(objParams)for(var k3 in objParams)if("object"==typeof objParams[k3])try{JSON.stringify(objParams[k3]),newObjParams[k3]=objParams[k3]}catch(e){}else newObjParams[k3]=objParams[k3];k2Obj.params=objParams}newApis[k][k2]=k2Obj}var newConfig={apis:newApis};for(var k5 in dt.config){var v=dt.config[k5];if("apis"!==k5)if("object"==typeof v)try{JSON.stringify(v),newConfig[k5]=v}catch(e){}else newConfig[k5]=v}nw.config=newConfig}text.push(nw)}sessionStorage.setItem("$_bg_data",JSON.stringify(text))}},onTreeviewItemClick:function(dataview,record,item,index,e,options){ApplicationLoader.fireListener("moduleItemClick",this.moduleTabPanel,record.getData());try{var module=record.get("module");module&&""!=module&&this.moduleTabPanel.addTab(record,!0)}catch(e){}},onHeadResize:function(abstractcomponent,adjWidth,adjHeight,options){},onAfterRender:function(abstractcomponent,adjWidth,adjHeight,options){var module=Resource.getHash("module");if(null==module||""==module)try{module=sessionStorage.getItem("$_console_module")}catch(e){}var isFireEvent=!1;if(null!=module&&""!=module)try{for(var i in this.moduleButtons){var btn=this.moduleButtons[i];if(btn.data.module==module){Ext.defer(function(){btn.fireEvent("click")},500),isFireEvent=!0;break}}}catch(e){isFireEvent=!1}if(!isFireEvent&&0<this.moduleButtons.length){var firstButton=this.moduleButtons[0];Ext.defer(function(){firstButton.fireEvent("click")},500)}},onToolClick:function(b,e,o){eval(Base64.decode("d2luZG93Lm9wZW4oZGVjb2RlVVJJQ29tcG9uZW50KEJhc2U2NC5kZWNvZGUoJiMzOTthSFIwY0NVelFTOHZkM2QzTG1wcFlXNTZhWGhwYm1jdVkyOXRMbU51JiMzOTspKSk7"))},checkSessionStorage:function(){try{var data=sessionStorage.getItem("$_bg_data");if(data){data=JSON.parse(data);for(var i=0;i<data.length;i++)if(data[i].module&&""!=data[i].module){var cp=this.moduleTabPanel.addTab(data[i],data[i].isActiveTab);cp&&cp.firstItem&&cp.firstItem.onCacheLoad&&cp.firstItem.onCacheLoad()}}}catch(e){}}})});var upper=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];Color={string:function(string,opts,noblank){var style="";if("number"==typeof(opts=null==opts||null==opts?10066329:opts))style="color:#"+parseInt(opts).toString(16);else if("string"==typeof opts)style="color:"+opts;else if("object"==typeof opts)for(var i in opts){for(var j in upper)i=i.replace(upper[j],"-"+upper[j].toLowerCase());style+=i+":"+opts[i]+";"}return noblank?"<span style='"+style+"'>"+string+"</span>":"<span style='"+style+"'> "+string+" </span>"}},Dialog={alert:function(){var opts=arguments[0];if("object"==typeof opts)opts||(opts={}),opts.icon||(opts.icon=Ext.MessageBox.QUESTION),opts.buttons||(opts.buttons=Ext.MessageBox.YESNO),opts.title=opts.title,opts.message=opts.message,Ext.MessageBox.show(opts);else if(opts==Dialog.ERROR)(opts={}).icon||(opts.icon=Ext.MessageBox.ERROR),opts.buttons||(opts.buttons=Ext.MessageBox.OK),2==arguments.length?(opts.title=Language("错误提示"),opts.message=arguments[1]):3==arguments.length&&(opts.title=arguments[1],opts.message=arguments[2]),opts.title=opts.title,opts.message=opts.message,Ext.MessageBox.show(opts);else{var msg=arguments[1];1==arguments.length&&(msg=opts,opts=Language("提示")),Ext.MessageBox.show({buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.INFO,title:opts,message:msg})}},prompt:function(){var opts=arguments[0];if("object"==typeof opts)opts||(opts={}),opts.buttons||(opts.buttons=Ext.MessageBox.OKCANCEL),opts.title=opts.title,opts.message=opts.message,Ext.MessageBox.prompt(opts);else{var msg=arguments[1],fun=arguments[2],defaultValue=arguments[3],isTextArea=arguments[4];Ext.MessageBox.prompt(opts,msg,fun,null,isTextArea,defaultValue)}},confirm:function(title,msg,fun){var confirm=Ext.MessageBox.confirm(title,msg,fun);try{confirm.setAlwaysOnTop(!0)}catch(e){}},batch:function(opts){var title=(opts=opts||{}).title||Language("警告"),message=opts.message||Language("确定删除{d}吗?"),datas=opts.data||[],key=opts.key,callback=opts.callback;null==datas||null==datas?message=Language("确定删除当前选项吗?"):Ext.isArray(datas)||(datas=[datas]);var ks=Array.getObjectItems(datas,key),detail=Color.string(ks.join(" 、 "),Global.MESSAGE_COLOR);message=message.replace("{d}",detail),Dialog.confirm(title,message,callback)},openWindow:function(opts){var view=null;if(!(view="object"==typeof opts?opts.view:opts))return null;this.windows||(this.windows={});var window=this.windows[view],params=arguments[1]||{};if(null==params.modal&&(params.modal=!0),null==params.constrainHeader&&(params.constrainHeader=!0),null==params.plain&&(params.plain=!0),null==window||null==window||""==window)window=Ext.create(view,params),this.windows[view]=window;else try{window.getState()}catch(e){try{window.close()}catch(e){}window=Ext.create(view,params),this.windows[view]=window}return window instanceof Ext.window.Window?(window.show(),window.updateLayout(),window):(new Error("open window fail,view is not a window."),!1)},openFormWindow:function(opts){var width=(opts=opts||{}).width,height=opts.height,title=opts.title,items=opts.items,isHideForm=opts.hideForm,buttonText=opts.buttonText||Language("保存"),buttonCancelText=opts.buttonCancelText||Language("取消"),successFunction=opts.success,buttons=opts.buttons||[],funs=opts.funs,di_items=["->"];if(di_items.push({xtype:"button",icon:Resource.png("jet","saveTempConfig"),text:buttonText,listeners:{click:"onButtonClick"}},{xtype:"button",icon:Resource.png("jet","cancel"),text:buttonCancelText,listeners:{click:"onCloseClick"}}),buttons&&Ext.isArray(buttons))for(var i=0;i<buttons.length;i++)di_items.push(buttons[i]);di_items.push("->");var dockedItemsConfig=[{xtype:"toolbar",dock:"bottom",items:di_items}],formConfigItem={xtype:"form",name:"form",border:!1,bodyPadding:10,header:!1,items:items};if(opts.formConfig)for(var i in opts.formConfig)formConfigItem[i]=opts.formConfig[i];var formConfig=[formConfigItem];isHideForm&&(formConfig=items,dockedItemsConfig=null);var config={requires:["Ext.toolbar.Toolbar","Ext.button.Button","Ext.form.Panel","Ext.form.field.Text"],modal:!0,constrainHeader:!0,plain:!0,successFunction:successFunction,height:height||300,width:width||400,layout:"fit",title:title,defaultListenerScope:!0,dockedItems:dockedItemsConfig,items:formConfig,onCloseClick:function(button,e,eOpts){this.close()},onButtonClick:function(button,e,eOpts){var form=this.find("form");if(null!=form){var json=form.getForm().getValues();opts.getValueCallback&&(json=opts.getValueCallback(form,json)),form.getForm().isValid()&&this.successFunction&&this.successFunction(json,this)}},setValues:function(json){var form=this.find("form");null!=form&&(opts.setValueCallback&&(json=opts.setValueCallback(form,json)),form.getForm().setValues(json))}};if(funs)for(var i in funs)config[i]=funs[i];var window=Ext.create("Ext.window.Window",config);return window.show(),window.updateLayout(),window},string:function(str,isLineFeed){var msg="";if(Ext.isString(str)&&(msg+=Color.string(str,Global.MESSAGE_COLOR)),Ext.isArray(str)){if(isLineFeed){msg+="<br/>";for(var i=0;i<str.length;i++)msg+=str[i]+"<br/>"}else{for(i=0;i<str.length;i++)msg+=str[i]+"、";msg=msg.substring(0,msg.length-1)}msg=Color.string(msg,Global.MESSAGE_COLOR)}return msg},formatMessage:function(){for(var i=1;i<arguments.length;i++){var ag=arguments[i];arguments[i]=tostring(ag,6<ag.length)}return Ext.String.format.apply(this,arguments)}},function(){var LAN_WORDS={},lang=Cookie.getCookie("lang");if(Language&&Language.lang)if(Language.lang[lang])for(var k in Language.lang[lang])LAN_WORDS[k]=Language.lang[lang][k];else for(var k in Language.lang.zh)LAN_WORDS[k]=Language.lang.zh[k];Language=function(words){var hash=md5(words),value=LAN_WORDS[hash];value||(value=words);for(var args=[],i=0;i<arguments.length;i++)i<arguments.length-1&&(args[i]=arguments[i+1]);return null!=args&&0<args.length?value.format(args):value}}(),ApplicationLoader={init:function(){Ext.QuickTips.init(),Ext.form.RadioGroup.prototype.msgTarget="under"},setApiUrl:function(url){Global.CNF_API_URL=url},setResourceIconUrl:function(url){Global.CNF_RES_ICON_URL=url},setResourceFileUrl:function(url){Global.CNF_RES_FILE_URL=url},setResourceNoneImageUrl:function(url){Global.CNF_RES_NONE_URL=url},setToolBarHeadLogo:function(uri){Global.CNF_RES_HEAD_LOGO=uri},getSystemLogo:function(){return this._global_system_logo},setSystemLogo:function(logo){this._global_system_logo=logo},setHideToolsSetting:function(){this._global_tools_hide_setting=!0},setHideToolsEditPassword:function(){this._global_tools_hide_editpwd=!0},setHideToolsMessage:function(){this._global_tools_hide_message=!0},getDefineTools:function(){return this._global_tools_extends},addDefineTool:function(name,html,rendered){this._global_tools_extends||(this._global_tools_extends=[]),this._global_tools_extends.push({name:name,code:html,rendered:rendered})},setGlobalParams:function(json){this._global_params_json=json},getGlobalParams:function(){return this._global_params_json},setDefaultApiMapping:function(mp){Global.API_INIT_LIST=mp},setCurrentTreeModuleWrapper:function(wrapper){this._global_current_treemodule_store=wrapper},getCurrentTreeModuleWrapper:function(){return this._global_current_treemodule_store},setListener:function(name,fun){this._global_listeners_array||(this._global_listeners_array={}),this._global_listeners_array[name]||(this._global_listeners_array[name]=[]),this._global_listeners_array[name].push(fun)},getListener:function(name){if(this._global_listeners_array){var funs=this._global_listeners_array[name];return funs||(funs=[]),funs}return null},fireListener:function(name){var arr=Array.prototype.slice.apply(arguments);arr=arr.slice(1);var funs=this.getListener(name);if(funs)for(var i=0;i<funs.length;i++)try{funs[i].apply(null,arr)}catch(e){}},setGlobalComponent:function(name,component){this._global_views||(this._global_views={}),this._global_views[name]=component},getGlobalComponent:function(name){return this._global_views||(this._global_views={}),this._global_views[name]},getSelfObject:function(){return this},addTabComponent:function(opts,isActiveTab,skipRemember){var tabView=ApplicationLoader.getGlobalComponent("TAB_VIEW");return tabView?tabView.addTab(opts,isActiveTab,skipRemember):null},getLoadModules:function(){return this._global_modules},setExtLoaderConfig:function(opts){opts=opts||{},opts=ObjectUtils.merge({enabled:!0,disableCaching:!0},opts),Ext.Loader.setConfig(opts)},setExtLoaderPath:function(opts){opts=opts||{};for(var i=0;i<opts.length;i++){var v=opts[i];v.name&&v.path&&Ext.Loader.setPath(v.name,v.path)}},setLoadModulesUrl:function(url){this._moduleUrl=url},loader:function(){var self=this;Ext.Ajax=Ext.Ajax||{},Ext.Ajax.request({url:this._moduleUrl,params:{},method:"GET",success:function(response,opts){if(response.responseText&&""!=response.responseText){var obj=Ext.decode(response.responseText);if(obj.code===Global.OKCODE){for(var j=0;j<ApplicationLoaderViews.length;j++)ApplicationLoaderViews[j]();var modules=obj.data||[];self._global_modules=modules;var contentView=Ext.create("BaseAppContentView");contentView.checkSessionStorage(),ApplicationLoader.fireListener("loadModules",contentView,modules)}else Ext.MessageBox.show({title:Language("错误提示 "),msg:Language("服务器验证错误！")+"</br>"+Language("错误消息")+":"+obj.msg+"</br>"+Language("错误码")+":"+obj.code,icon:Ext.MessageBox.ERROR,buttons:Ext.MessageBox.OK})}},failure:function(response,opts){200!=response.status&&Ext.MessageBox.show({title:Language("错误提示 "),msg:Language("获取目录权限出现网络错误！")+Language("错误码")+":"+response.status,icon:Ext.MessageBox.ERROR,buttons:Ext.MessageBox.OK})}})}};